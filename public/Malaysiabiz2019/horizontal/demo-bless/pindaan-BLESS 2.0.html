
<!-- saved from url=(0085)http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414 -->
<html xmlns="http://www.w3.org/1999/xhtml" class="gr__trainingb2_bless_gov_my"><!--Head--><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
        <title>BLESS 2.0</title>
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        
        <link rel="shortcut icon" type="image/x-icon" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/static/images/jata_2_0.png">
        <link rel="icon" type="image/x-icon" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/static/images/jata_2_0.png">  
        
        <!-- css -->
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/font-awesome-animation.min.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/spinkit.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/smartadmin-production-plugins.min.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/smartadmin-production.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/smartadmin-skins.min.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/smartadmin-rtl.min.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/elite.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/style.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/blue.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/jquery.treegrid.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/bootstrap-clockpicker.min.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/ajax_loading.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/animate.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/jquery.toast.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/sweetalert.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/my.style.css">
        <link rel="stylesheet" type="text/css" media="screen" href="./pindaan-BLESS 2.0_files/daterangepicker.css">
        

        <!-- js -->
        <script src="./pindaan-BLESS 2.0_files/jquery-2.1.1.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery-ui-1.10.3.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.cookie.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/app.config.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.inputmask.bundle.js.download"></script><style type="text/css">.im-caret {
	-webkit-animation: 1s blink step-end infinite;
	animation: 1s blink step-end infinite;
}

@keyframes blink {
	from, to {
		border-right-color: black;
	}
	50% {
		border-right-color: transparent;
	}
}

@-webkit-keyframes blink {
	from, to {
		border-right-color: black;
	}
	50% {
		border-right-color: transparent;
	}
}

.im-static {
	color: grey;
}
</style>
        <script src="./pindaan-BLESS 2.0_files/bootstrap.min.js.download"></script>
        <!--<script th:src="@{/static/js/bootstrap/bootstrap-datepicker.min.js}"></script>-->
        <script src="./pindaan-BLESS 2.0_files/SmartNotification.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.validate.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.maskedinput.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/select2.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/bootstrap-slider.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.mb.browser.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/app.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/mykad_reader.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery-jvectormap-1.2.2.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery-jvectormap-world-mill-en.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/moment.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/daterangepicker.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.fullcalendar.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.dataTables.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/datatables.responsive.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/ckeditor.js.download"></script><style>.cke{visibility:hidden;}</style>
        <script src="./pindaan-BLESS 2.0_files/jquery.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.fileupload.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/bootstrap-timepicker.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/clockpicker.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/morris.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/raphael.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/chart.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/tinymce.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.bootstrap.newsbox.js.download"></script>
        
        
        
        <script src="./pindaan-BLESS 2.0_files/jquery.canvasjs.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.toast.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/sweetalert.min.js.download"></script>
        
        <script src="./pindaan-BLESS 2.0_files/jquery.numeric.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/numeral.min.js.download"></script>
        
        <script src="./pindaan-BLESS 2.0_files/waypoints.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/jquery.counterup.min.js.download"></script>
        
        <script src="./pindaan-BLESS 2.0_files/d3-3.5.6.min.js.download"></script>
        <script src="./pindaan-BLESS 2.0_files/uvcharts.min.js.download"></script>
        
        <script src="./pindaan-BLESS 2.0_files/printThis.js.download"></script>
        
        <script src="./pindaan-BLESS 2.0_files/printThis.js.download"></script>
        
        <script>
            /*<![CDATA[*/
            $(function() {
                pageSetUp();
                alertProcess();
                customSetup();
                runOnce();
                
                ajaxindicatorstart();
                
                $('.fieldset-title').after("<br/><hr/><br/>");
            });
            
            $(window).load(function(){
                ajaxindicatorstop();
            });
            
//            $(this).mousemove(function (e) {
//                if(parent.length > 0){
//                    try {
//                        parent.startTimer();
//                    } catch(e) {
//                    }
//                }
//            });
//
//            $(this).keypress(function (e) {
//                if(parent.length > 0){
//                    try {
//                        parent.startTimer();
//                    } catch(e) {
//                    }
//                }
//            });
            /*]]>*/
        </script>
        
        <!--Variables-->
        <script>
            /*<![CDATA[*/
            var cancelButtonText = 'Cancel';
            /*]]>*/
        </script>
            
        <!--Custom-->
        <script>
            /*<![CDATA[*/
            
            function runOnce(){
                $("form").attr("autocomplete", "off");
                $(".table").wrap('<div></div>');
                $(".table-location").html('<br/><table class="table table-bordered"><tr><td align="center"><div class="sk-circle"><div class="sk-circle1 sk-child"></div><div class="sk-circle2 sk-child"></div><div class="sk-circle3 sk-child"></div><div class="sk-circle4 sk-child"></div><div class="sk-circle5 sk-child"></div><div class="sk-circle6 sk-child"></div><div class="sk-circle7 sk-child"></div><div class="sk-circle8 sk-child"></div><div class="sk-circle9 sk-child"></div><div class="sk-circle10 sk-child"></div><div class="sk-circle11 sk-child"></div><div class="sk-circle12 sk-child"></div></div></td></tr></table>');
                $("#dt_list").css("width", "");
            }
                            
            function customSetup(){
                $("[title]").tooltip();
                $("input").css('padding-left','10px');
                $("textarea").css('padding-left','10px');
                
                plugin_datePicker();
                button_icon_preset();
                
                $('.dropdown-select2').select2("destroy");
                $('.dropdown-select2').select2({
                    allowClear:true
                });
                
                $(".loadSpinner").click(function(){
                    ajaxindicatorstart();
                });
                
                $('.open-date-picker').click(function(){
                    var idDatePicker = $(this).prev().attr('id');
                    if(idDatePicker){
                        $('#'+idDatePicker).datepicker('show');
                    }
                });
                
                $('.postcode').each(function(){
                    $(this).attr('data-mask','99999');
                    $(this).attr('data-mask-placeholder','x');
                });
                
                $('.required').each(function(){
                    labelAsRequired(this);
                });
                
                $('.custom-message').each(function(){
                    labelAsCustom(this);
                });
                
                $('.form-group').each(function(){
                    if (this.className.indexOf('form-group-sm') > -1) {
                    } else {
                        $(this).addClass("form-group-sm");
                    }
                });
                
                $('.year').each(function(){
                    $(this).attr('data-mask','9999');
                    $(this).attr('data-mask-placeholder','x');
//                    var jj = $(this).nextAll().html();
//                    if(jj == null){
//                        $(this).wrap('<div class="input-group"></div>');
//                        $(this).after('<span class="input-group-addon"><i class="fa fa-calendar"></i></span>');
//                    }
                });
                
                $('.year-set').each(function(){
                    $(this).attr('data-mask','9999');
                    $(this).attr('data-mask-placeholder','x');
                    var jj = $(this).nextAll().html();
                    if(jj == null){
                        $(this).wrap('<div class="input-group"></div>');
                        $(this).after('<span class="input-group-addon"><i class="fa fa-calendar"></i></span>');
                    }
                    $(this).val(new Date().getFullYear());
                });
                
                //below codes act as replacement while smart-style-6 problem is solved
                $('.currency').each(function(){
                    var jj = $(this).prevAll().html();
                    if(jj == null){
                        $(this).wrap('<div class="input-group"></div>');
                        $(this).css('text-align', 'right');
                        $(this).before('<span class="input-group-addon">RM</span>');
                    }
                });
                
                $(".nric").keydown(function (e) {
                    // allow: backspace, delete, tab, escape, enter, . , ctrl+a , home, end,  navigational
                    if ($.inArray(e.keyCode, [46, 8, 9, 27, 13]) !== -1 || (e.keyCode == 65 && e.ctrlKey === true) || (e.keyCode >= 35 && e.keyCode <= 40) || (e.keyCode >= 96 && e.keyCode <= 105)) {
                        return;
                    }
                    
                    if ((e.shiftKey || (e.keyCode < 47 || e.keyCode > 90))) {
                        e.preventDefault();
                    }
                });
                
                
                $(".numeric-no-negative").each(function(){
                   $(this).numeric(); 
                    $(this).keydown(function (e) {
                        if ((e.shiftKey || e.keyCode == 189)) {
                            e.preventDefault();
                        }
                    });
                });
                
                $(".numeric").each(function(){
                   $(this).numeric(); 
                });
                
                
                
                $(".numeric").change(function(){
                    var max_value = $(this).attr("max");
                    if(max_value) {
                        var value = this.value;
                        if(parseInt(value) <= parseInt(max_value)) {
                            this.value = value;
                        } else {
                            this.value = max_value;
                        }
                    }
                });
                
                $(".round-number").change(function(){
                    var value = this.value;
                    this.value = Math.floor(value);
                });
                
                $("input[type=number]").change(function(){
                   var a = $(this).val();
                   if(a < 0){
                       $(this).val(0);
                   }
                });
                
                $("input[type=text]").change(function(){
                    var containNotUppercaseClass = $(this).hasClass("not-uppercase");
                    if(!containNotUppercaseClass) {
                        this.value = this.value.toUpperCase();
                    }
                });
                
                $(".counter").counterUp({
                    delay: 100,
                    time: 1200
                });
                
                $('.wordcount').each(function(){
                    var id = this.id;
                    var jj = $(this).nextAll().html();
                    if(jj == null){
                        $(this).after('<span style="font-size: 11px; clear: both; margin-top: 3px; display: block;" id="counter-text-' + id + '">200</span>');
                    }
                });
                
                $('.wordcount').keyup(function() {
                    var id = this.id;
                    var limit = 200;
                    
                    text = $(this).val();
                    if(text === "") {
                        wordcount = 0;
                    } else {
                        wordcount = $.trim(text).split(" ").length;
                    }
                    
                    if(wordcount > 200) {
                        $("#counter-text-" + id).html('<span style="color: #DD0000;">0</span>');
                            limited = $.trim(text).split(" ", limit);
                            limited = limited.join(" ");
                            $(this).val(limited);
                    } else {
                        $("#counter-text-" + id).html((limit - wordcount));
                    } 
                    
                    $('#' + id).trigger("change");
                });
                
                $(".uppercase").change(function(){
                    this.value = this.value.toUpperCase();
                });
                
                $(".system-code").keypress(function(e){
                    var key = e.charCode || e.keyCode;
                    if((key >=48 && key <= 57) || (key >=65 && key <= 90) || (key >=97 && key <= 122) || key == 95){
                    } else {
                        e.preventDefault();
                    }
                });
                
                $(".system-code").each(function(e){
                    var jj = $(this).nextAll().html();
                    if(jj == null){
                        $(this).after('<div class="note">' + 'Only A-Z, 0-9 & _ are allowed' + '</div>');
                    }
                });
                
                $(".button-load").click(function(e){
                    var id = this.id;
                    var html = $(this).html();
                    
                    if(id != null) {
                        $("#" + id).prop("disabled", true);
                        
                        var count = 1;
                        var interval = setInterval(function(){
                            if(count >= 1 && count <=3 ) {
                                $("#" + id).html(count + "...");
                                count++;
                            } else if(count > 3) {
                                clearInterval(interval);
                                $("#" + id).html(html);
                                $("#" + id).prop("disabled", false);
                            }
                        }, 1000);
                    }
                });
                
                $(".email").change(function(){
                    if(isValidEmailAddress(this.value) == false) {
                        this.value = "";
                        alertWarningMessage('Please provide a valid email address');
                    }
                });

                runAllForms();
            }
            
            function tableLoading(divID){
                $("#" + divID).html('<br/><table class="table table-bordered"><tr><td align="center"><div class="cssload-speeding-wheel"></div></td></tr></table>');
            }
            
            function tableLoading(divID, border, message){
                if(border) {
                    $("#" + divID).html('<br/><table class="table table-bordered"><tr><td align="center"><div class="cssload-speeding-wheel"></div><br/>' + message + '</td></tr></table>');
                } else {
                    $("#" + divID).html('<br/><table width="100%"><tr><td align="center"><div class="cssload-speeding-wheel"></div><br/>' + message + '</td></tr></table>');
                }
            }
            
            function triggerChangeForm(formID){
                $("form#" + formID + " :input").each(function(){
                    $(this).trigger("change");
                });
            }
            
            /*]]>*/
        </script>
        
        <!--Button Icon Preset-->
        <script>
        /*<![CDATA[*/
            function button_icon_preset() {
                $('#btnSubmit').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-paper-plane'></i><span>"+'Submit'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnReset').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-default');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-refresh'></i><span>"+'Reset'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnSave').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-save'></i><span>"+'Save'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnBack').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-danger');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-arrow-left'></i><span>"+'Back'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnSearch').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-search'></i><span>"+'Search'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnDraft').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-file'></i><span>"+'Save as Draft'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnPreview').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-eye'></i><span>"+'Preview'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnChecklist').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-check-square-o'></i><span>"+'Checklist & Guidelines'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnReference').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-folder-open'></i><span>"+'Reference Document'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnViewComment').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-comment'></i><span>"+'View Comment'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnClaim').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-file-text-o'></i><span>"+'Claim'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnUnclaim').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-exchange'></i><span>"+'Unclaim'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnUpdateLicense').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-pencil-square-o'></i><span>"+'Update'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnSuspendLicense').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-tags'></i><span>"+'Suspend'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnUnholdLicense').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-tags'></i><span>"+'Unhold'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnCancel').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-eraser'></i><span>"+'Cancel/Cessation'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnTransHistory').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-history'></i><span>"+'Transaction History'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
                $('#btnReactivate').each(function(){
                    if(!$("#"+this.id).hasClass('custom-button')){
                        $("#"+this.id).removeAttr('class');
                        $("#"+this.id).addClass('btn btn-primary');
                        $(this).html(function(){
                            return "<i class='fa fa-1x fa-fw fa-check-square-o'></i><span>"+'Reactivate'+"</span>";
                        });

                        $("[title]").tooltip();
                    }
                });
            }
        /*]]>*/
        </script>
        
        <!--Plugin: Date/Range Picker-->
        <script>
        /*<![CDATA[*/
        
            function plugin_datePicker(){
                
                $('.datepicker-init').datepicker({
                    dateFormat: 'dd/mm/yy',
                    autoclose: true,
                    prevText: "<",
                    nextText: ">",
                });
                
//                $('.datepicker-init').each(function(){
//                    var id = this.id;
//                    var form_id = $(this).closest('form').attr('id');
//                    $(this).daterangepicker({
//                        autoApply: true,
//                        drops: 'up',
//                        showDropdowns: true,
//                        singleDatePicker: true,
//                        autoUpdateInput: false,
//                        locale: {
//                            format: 'DD/MM/YYYY',
//                        }
//                    }, function(start) {
//                        var format = 'DD/MM/YYYY';
//                        start = start.format(format);
//
//                        $("#" + id, "#" + form_id).val(start);
//                        $("#" + id, "#" + form_id).trigger("change");
//                    });
//                });

                $('.datepicker-init').each(function(){

                    var label = "<i class='fa fa-calendar'></i>";
                    var custom_label = $(this).attr("label");
                    if(custom_label) {
                        label = custom_label;
                    }

                    $(this).inputmask("dd/mm/yyyy");
                    var r=$(this).prop("readOnly");
                    var d=$(this).prop("disabled");//for disabled@readonly datepicker,doesnt add on icon datepicker
                    var jj = $(this).nextAll().html();
                    if(jj == null&&(!r&&!d)){
                        $(this).wrap('<div class="input-group"></div>');
                        $(this).after('<span class="input-group-addon open-date-picker">' + label + '</span>');
                    }
                });

                $('.rangepicker-init').each(function(){
                    var id = this.id;
                    var form_id = $(this).closest('form').attr('id');
                    var value = this.value.split(' - ');
                    
                    var dateLimit_option = {};
                    var year = $(this).attr('limit-year');
                    var day = $(this).attr('limit-day');
                    
                    if(year != null) {
                        dateLimit_option['year'] = year;
                    }
                    
                    if(day != null) {
                        dateLimit_option['day'] = day;
                    }
                    
                    var main_option = {
                        autoApply: true,
                        drops: 'up',
                        showDropdowns: true,
                        autoUpdateInput: false,
                        locale: {
                            format: 'DD/MM/YYYY'
                        },
                        dateLimit: dateLimit_option
                    };
                    
                    if(value[0] != "") {
                        main_option['startDate'] = value[0];
                    }
                    
                    if(value[1] != "") {
                        main_option['endDate'] = value[1];
                    }
                    
                    $(this).daterangepicker(main_option, function(start, end) {
                        var format = 'DD/MM/YYYY';
                        start = start.format(format);
                        end = end.format(format);

                        $("#" + id, "#" + form_id).val(start + ' - ' + end);
                        $("#" + id, "#" + form_id).trigger("change");
                    });
                });

                $('.rangepicker-init').each(function(){
                    var r=$(this).prop("readOnly");
                    var d=$(this).prop("disabled");//for disabled@readonly datepicker,doesnt add on icon datepicker
                    var jj = $(this).nextAll().html();
                    if(jj == null&&(!r&&!d)){
                        $(this).wrap('<div class="input-group"></div>');
                        $(this).after('<span class="input-group-addon open-date-picker"><i class="fa fa-calendar"></i></span>');
                    }
                });
                
                $('.timepicker-init').timepicker({
                    defaultTime: false,
                    readonly: true,
                    timeFormat:'hh:mm p',
                    minTime: '08:00 AM',
                    maxTime: '12:00 AM',
                    minuteStep: 30
                });
                
                $('.timepicker-init').each(function(){
                    var jj = $(this).nextAll().html();
                    if(jj == null){
                         $(this).wrap('<div class="input-group"></div>');
                        $(this).after('<span class="input-group-addon"><i class="fa fa-clock-o"></i></span>');
                    }
                });
                
                $('.clockpicker-init').clockpicker({
                    default: 'now',
                    donetext: "<i class='fa fa-check'></i>",
                    twelvehour: true
                });
                
                $('.clockpicker-init').each(function(){
                    var jj = $(this).nextAll().html();
                    if(jj == null){
                        $(this).wrap('<div class="input-group"></div>');
                        $(this).after('<span class="input-group-addon"><i class="fa fa-clock-o"></i></span>');
                    }
                });
            }
        
        /*]]>*/
        </script>
        
        <!--Load Options-->
        <script>
            /*<![CDATA[*/
            var contextPath = /BLESS2_PROD_TEST/;
            
            function loadCityByState(stateId, cityId, function_callback, formId){
                removeOptionsExceptFirst(cityId);
                $('#' + cityId, "#" + formId).select2("val", "");
                
                $.ajax({
                    url: contextPath + "/private/refCity/ajax/loadCityByState",
                    method: "get",
                    data: "stateId=" + $("#" + stateId).select2("val"),
                    success: function(data) {
                        $.each(data, function(a,b){
                            $("#"+cityId, "#" + formId).append('<option value="'+b.cityId+'">'+b.cityName+'</option>');
                        });
                        
                        if(function_callback != null) {
                            function_callback();
                        }
                   }
                });
            }
            
            function loadCityByStateOther(stateId, cityId){
                removeOptionsExceptFirst(cityId);
                $('#' + cityId).select2("val", "");
                
                $.ajax({
                    url: contextPath + "/private/refCity/ajax/loadCityByState",
                    method: "get",
                    data: "stateId=" + $("#" + stateId).select2("val"),
                    success: function(data) {
                        $.each(data, function(a,b){
                            $("#"+cityId).append('<option value="'+b.cityId+'">'+b.cityName+'</option>');
                        });
                   }
                });
            }
            
            function loadProcessingAgencyByState(stateCode, selected, licenseMetaId, tgtSelectId){
                if(stateCode == "" || stateCode == null) {
                    removeOptionsExceptFirst(tgtSelectId);
                } else {
                    $.ajax({
                        url: contextPath + "/private/refAgency/ajax/getAgency/" + stateCode + "/" + licenseMetaId,
                        method: "GET",
                        success: function(data){
                            removeOptionsExceptFirst(tgtSelectId);
                            $.each(data, function(a, b){
                                $("#" + tgtSelectId).append('<option value="'+b.agencyId+'">'+b.agencyName+'</option>');
                            });
                            if(selected != "null") {
                                $("#" + tgtSelectId).select2("val", selected);
                            }
                        }
                    })
                }
            }
            
            function loadLicensingAgencyByState(stateCode, selected, licenseMetaId, tgtSelectId){
                if(stateCode == "" || stateCode == null) {
                    removeOptionsExceptFirst(tgtSelectId);
                } else {
                    $.ajax({
                        url: contextPath + "/private/refLicenseAgency/ajax/getLicensingAgency/" + stateCode + "/" + licenseMetaId,
                        method: "GET",
                        success: function(data){
                            removeOptionsExceptFirst(tgtSelectId);
                            $.each(data, function(a, b){
                                $("#" + tgtSelectId).append('<option value="'+b.refLicenseAgencyId+'">'+b.agencyName+'</option>');
                            });
                            
                            if(selected != null) {
                                $("#" + tgtSelectId).select2("val", selected);
                            } else if(data.length === 1) {
                                $("#" + tgtSelectId).select2("val", $("#" + tgtSelectId + " option:eq(1)").val());
                            }
                        }
                    })
                }
            }
            
            function loadAgencyByParent(parentId, childId){
                $('#' + childId).find('option:gt(0)').remove();
                $('#' + childId).select2("val", "");
                
                $.ajax({
                   url: contextPath + "/private/refAgency/loadAgencyByParent",
                   method: "get",
                   data: "parentId=" + $("#" + parentId).select2("val"),
                   success: function(data) {
                       $.each(data, function(a,b){
                           $("#"+childId).append('<option value="'+b.agencyId+'">'+b.agencyCode+'-'+ b.agencyName + '</option>');
                       })
                   }
                });
            }
            
            function getUrlParameter(sParam) {
                var sPageURL = decodeURIComponent(window.location.search.substring(1));
                var sURLVariables = sPageURL.split('&');
                var sParameterName;
                var i;

                for(i = 0; i < sURLVariables.length; i++){
                    sParameterName = sURLVariables[i].split('=');

                    if(sParameterName[0] === sParam) {
                        return sParameterName[1] === undefined ? true : sParameterName[1];
                    }
                }
            }
            /*]]>*/
        </script>
        
        <!--Validation-->
        <script>
            /*<![CDATA[*/
            function validateForm(array, formId){
                var countFail = 0;
                var alertContent = "";
                
                $.each(array, function(index, value){
                    
                    var content = $("#" + value.id, "#" + formId).val();                    
                    if(content == null) {
                        content = $("#" + formId+" input[name="+value.id+"]").val();
                    }
                    if(content == null) {
                        content = $("#" + value.id).val();
                    }
                    var type = $("#" + value.id, "#" + formId).prop('type');
                    if(type == null) {
                        type = $("#" + formId+" input[name="+value.id+"]").prop('type');
                    }                    
                    var message = value.message.replace("'", '').replace("'", '');
                    log(content);
                    
                    if(type === "checkbox") {
                        var checked = $("#" + value.id, "#" + formId).is(':checked');
                        if(!checked) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "number") {
                        var allow_zero = $("#" + value.id, "#" + formId).hasClass("allow-zero");
                        if(!allow_zero && content == 0) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }else if(allow_zero && content === ""){
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "email"){
                        if(!isValidEmailAddress(content)){
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "select-one"){
                        //Dropdown
                        if(!content){
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else {
                        if(content === "" || content == 0 || content == null) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    }
                });
                
                if(countFail > 0) {
                    $.toast({
                        heading: "<b>"+countFail+" Field(s) required</b>",
                        text: alertContent,
                        position: 'top-right',
                        loaderBg:'#ff6849',
                        icon: 'error',
                        hideAfter: 3000, 
                        stack: 1
                    });
                }
                
                return countFail;
            }
            
            function validateFormReturnsContent(array, formId){
                var countFail = 0;
                var alertContent = "";
                
                $.each(array, function(index, value){
                    var content = $("#" + value.id, "#" + formId).val();
                    var type = $("#" + value.id, "#" + formId).prop('type');
                    var message = value.message.replace("'", '').replace("'", '');
                    
                    var isReadonly = $('#' + value.id, '#' + formId).attr('readonly');
                    
                    if(isReadonly) {
                        return true;
                    } else if(type === "checkbox") {
                        var checked = $("#" + value.id, "#" + formId).is(':checked');
                        if(!checked) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "number") {
                        if(content == 0) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else {
                        if(content === "" || content == 0) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    }
                });
                
                return alertContent;
            }
            
            function validateFormReturnsContent2(array, formId, count){
                var countFail = count;
                var alertContent = "";
                
                $.each(array, function(index, value){
                    var content = $("#" + value.id, "#" + formId).val();
                    var type = $("#" + value.id, "#" + formId).prop('type');
                    var message = value.message.replace("'", '').replace("'", '');
                    
                    var isReadonly = $('#' + value.id, '#' + formId).attr('readonly');
                    
                    if(isReadonly) {
                        return true;
                    } else if(type === "checkbox") {
                        var checked = $("#" + value.id, "#" + formId).is(':checked');
                        if(!checked) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else if(type === "number") {
                        if(content == 0) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    } else {
                        if(content === "" || content == 0) {
                            countFail++;
                            alertContent = alertContent + "<br>" + countFail + ". " + message;
                        }
                    }
                });
                
                return alertContent;
            }
            
            function validateFormReturnsCountNoAlert(array, formId){
                var countFail = 0;
                
                $.each(array, function(index, value){
                    var content = $("#" + value.id, "#" + formId).val();
                    var type = $("#" + value.id, "#" + formId).prop('type');
                    var message = value.message.replace("'", '').replace("'", '');
                    
                    var isReadonly = $('#' + value.id, '#' + formId).attr('readonly');
                    
                    if(isReadonly) {
                        return true;
                    } else if(type === "checkbox") {
                        var checked = $("#" + value.id, "#" + formId).is(':checked');
                        if(!checked) {
                            countFail++;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                        }
                    } else if(type === "radio") {
                        var selected = $('input[id='+value.id+']:checked', '#' + formId).val();
                        if(!selected) {
                            countFail++;
                        }
                    } else if(type === "number") {
                        if(content == 0) {
                            countFail++;
                        }
                    } else {
                        if(content === "" || content == 0) {
                            countFail++;
                        }
                    }
                });
                
                return countFail;
            }
            
            function validateSubmit(array, form){
                var countFail = validateForm(array, form);
                if(countFail == 0){
                    $("#" + form).submit();
                }
            }
            
            function validateSubmit2(array, form, callback){
                var countFail = validateForm(array, form);
                if(countFail == 0){
                    $("#" + form).submit();
                }else {
                    callback();
                }
            }
            
            function validateSubmit_class(array, form){
                var countFail = 0;
                $.each(array, function(index, value){
                    $("." + value.id).each(function(){
                       var content = $(this).val();
                       if(content === ""){
                            countFail++;
                            alert4("Error", value.message + ' ' + "is required", 'warning');
                        }
                    });
                });

                if(countFail == 0){
                    $(form).submit();
                }
            }
            /*]]>*/
        </script>
        
        <!--Alert-->
        <script>
            /*<![CDATA[*/
            function errorAlert(){
                var title = "Error";
                var message = "Please contact system administrator for further action.";
                alert4(title, message, 'error');
            }
            
            function alertProcess() {
                var result = "[[${param.result[0]}]]";
                var r = "[[${param.r[0]}]]";
                var content = "[[#{${param.result[0]}+'.content'}]]";
                alert(result, r, content);
                
                if(result.indexOf("param.result") != -1 ){
                    var sResult = "[[${param.sResult[0]}]]";
                    var successTitle = "<b>[[#{${param.sResult[0]}+'.title'}]]</b>";
                    var totalSuccess = "[[${param.totalSuccess[0]}]]";
                    var successContent = "[[#{${param.sResult[0]}+'.content'}]]";
                    
                    //failure
                    var fResult = "[[${param.fResult[0]}]]";
                    var failureTitle = "<b>[[#{${param.fResult[0]}+'.title'}]]</b>";
                    var totalFailure = "[[${param.totalFailure[0]}]]";
                    var failureContent = "[[#{${param.fResult[0]}+'.content'}]]";
                    
                    alert(sResult, '', totalSuccess + "/" + totalFailure + " " + successContent);
                }
            }
            
            function alert(result, r, content) {
                if (result.indexOf("success") != -1) {
                    var successTitle = "Success";
                    alert2(successTitle, content, "success", r);
                } else if (result.indexOf("failure") != -1) {
                    var failureTitle = "Error";
                    alert2(failureTitle, content, "warning", r);
                }
            }
            
            function alert2(title, content, result, r) {
                if(r == "") {
                    alert3(title, content, result);
                    return;
                }
                else if(r.indexOf("param")!= -1) {
                    alert3(title, content, result);
                    return;
                }
                var exist = localStorage.getItem(r);
                if (exist == "done") {
                    return;
                } else {
                    localStorage.setItem(r, "done");
                    alert3(title, content, result);
                }
            }
            
            function alert3(title, content, result) {
                $.toast({
                    heading: title,
                    text: content,
                    position: 'top-right',
                    loaderBg:'#ff6849',
                    icon: result,
                    hideAfter: 3000, 
                    stack: 1
                });
            }
            
            function alert4(title, content, result) {
                $.toast({
                    heading: title,
                    text: content,
                    position: 'top-right',
                    loaderBg:'#ff6849',
                    icon: result,
                    hideAfter: 3000, 
                    stack: 6
                });
            }
            
            function alertAction(action, result){
                var title = "";
                var message = "";
                var icon = "";
                
                if(result === "OK"){
                    title = "Success";
                    icon = "success";
                } else {
                    title = "Error";
                    icon = "warning";
                }
        
                if(action === "insert"){
                    if(result === "OK"){
                        message = "New record successfully added";
                    } else {
                        message = "New record added failure";
                    }
                } else if(action === "update"){
                    if(result === "OK"){
                        message = "Record successfully updated";
                    } else {
                        message = "Record updated failure";
                    }
                } else if(action === "delete"){
                    if(result === "OK"){
                        message = "Record successfully deleted";
                    } else {
                        message = "Record failed to delete";
                    }
                }
                
                alert4(title, message, icon);
            }
            
            function alertCustomMessage(content, result){
                var title = "";
                var message = content;
                var icon = "";
                
                if(result === "OK"){
                    title = "Success";
                    icon = "success";
                } else if(result === "ERROR"){
                    title = "Alert";
                    icon = "warning";
                }else {
                    title = "Error";
                    icon = "warning";
                }
                
                alert4(title, message, icon);
            }
            
            function alertWarningMessage(content){
                var title = "Alert";
                var message = content;
                var icon = "warning";
                
                alert4(title, message, icon);
            }
            
            function alertCallbackY(title, text, confirmBtnText, callback){
                var _confirmBtnText = 'Yes';
                if(confirmBtnText != null && confirmBtnText != '') {
                    _confirmBtnText = confirmBtnText;
                }
                
                alertCallback(title, text, false, _confirmBtnText, callback, null);
            }
            
            function alertCallbackYN(title, text, confirmBtnText, callback_true, callback_false){
                var _confirmBtnText = 'Yes';
                if(confirmBtnText != null && confirmBtnText != '') {
                    _confirmBtnText = confirmBtnText;
                }
                
                alertCallback(title, text, true, _confirmBtnText, callback_true, callback_false);
            }
            
            function alertCallback(title, text, showCancelBtn, confirmButtonText, callback_true, callback_false){
                swal({   
                    html: true,
                    title: title,
                    text: text,
                    showCancelButton: showCancelBtn,   
                    confirmButtonColor: "#00aaf2",   
                    confirmButtonText: confirmButtonText,   
                    cancelButtonText: cancelButtonText,
                    closeOnConfirm: true 
                }, function(result){
                    if(callback_true && callback_false) {
                        if(result) {
                            callback_true();
                        } else {
                            callback_false();
                        }
                    } else {
                        if(result) {
                            callback_true();
                        }
                    }
                });
            }
            /*]]>*/
        </script>
            
        <!--Utilities-->
        <script>
            /*<![CDATA[*/
            function getDatagridSelectedValue(){
                var ids = [];
                dtSelectRow.each(function(key, value, index){
                    ids.push(value);
                });
                return ids;
            }
            
            function labelAsRequired(thiz){
                var id = $(thiz).prop('id');
                var content = $(thiz).html().replace('*','');
                
                $(thiz).html('');
                $(thiz).append("<span>" + content + "</span><b id='label_required_" + id + "' style='color: red'> *</b>");
            }
            
            function labelAsCustom(thiz){
                var content = $(thiz).text();

                $(thiz).html('');
                $(thiz).append("<span>" + content + "</span>");
            }
            
            function toDateString(dateStr) {
                if(dateStr == null || dateStr === ''){
                    return "";
                } else {
                    var parts = dateStr.split("-");
                    return parts[2] + '/' + parts[1] + '/' + parts[0];
                }
            }
            
            function addMonthToDate(dateStr, total_months){
                if(dateStr) {
                    var date = moment([dateStr.substr(6,4),dateStr.substr(3,2)-1,dateStr.substr(0,2)]).add(total_months, 'months');
                    date = date.subtract(1, 'days');
                    return date.format('DD/MM/YYYY');
                } else {
                    return null;
                }
            }
            
            function substractMonthFromDate(dateStr, total_months){
                if(dateStr) {
                    var date = moment([dateStr.substr(6,4),dateStr.substr(3,2)-1,dateStr.substr(0,2)]).subtract(total_months, 'months');
                    return date.format('DD/MM/YYYY');
                } else {
                    return null;
                }
            }
            
            function addMonthToDateStartOfMonth(dateStr, total_months){
                var date = moment([dateStr.substr(6,4),dateStr.substr(3,2)-1,dateStr.substr(0,2)]).add(total_months, 'months');
                date = moment(date).startOf('month');
                return date.format('DD/MM/YYYY');
            }
            
            function date2IsBeforeDate1(date1, date2) {
                
                var date1M = moment([date1.substr(6,4),date1.substr(3,2)-1,date1.substr(0,2)]);
                var date2M = moment([date2.substr(6,4),date2.substr(3,2)-1,date2.substr(0,2)]);
                
                return date2M < date1M;
            }
            
            function getAge(dateStr){
               var date = moment([dateStr.substr(6,4),dateStr.substr(3,2)-1,dateStr.substr(0,2)]);
               var birth_year = date.format('YYYY');
               var current_year = moment().format('YYYY');
               var age = parseInt(current_year)-parseInt(birth_year);
               return age;
            }
            
            function equalsIgnoreCase(string1, string2) {
                string1 = string1.toLowerCase();
                string2 = string2.toLowerCase();
                
                if(string1 === string2) {
                    return true;
                } else {
                    return false;
                }
            }
            
            function appendRow(id, data){
                $("#" + id + " tbody tr:last").after(data);
            }
            
            function removeRowExceptFirst(id){
                $("#" + id + " tr:gt(0)").remove();
            }
            
            function removeOptionsExceptFirst(id) {
                $('#' + id).find('option:gt(0)').remove();
                $('#' + id).select2('val', '');
            }
            
            function selectFirstOption(id) {
                $('#' + id).select2('val', $('#' + id + ' option:eq(1)').val());
            }
            
            function removeTblAction(tableId) {
                var table = $("#" + tableId).find("tr");
                table.find("td:last").remove();
                table.find("th:last").remove();
            }
            
            function appendOption(id, value, text) {
                $('#' + id).append('<option value="' + value + '">' + text + '</option');
            }
            
            function appendOptionCode(id, code, value, text) {
                $('#' + id).append('<option value="' + value + '" code="' + code + '">' + text + '</option');
            }
            
            function formatAddressVertical(address_1, address_2, address_3, postcode, city, state, country) {
                address_1 = address_1 == null ? "" : address_1;
                address_2 = address_2 == null ? "" : address_2;
                address_3 = address_3 == null ? "" : address_3;
                postcode = postcode == null ? "" : postcode;
                city = city == null ? "" : city;
                state = state == null ? "" : state;
                country = country == null ? "" : country;

                address_1 = address_1 + "\n";
                address_2 = address_2 + "\n";
                address_3 = address_3 + "\n";

                var postcode_city = "";
                if (postcode != "" && city != "") {
                    postcode_city = postcode + ", " + city + "\n";
                } else if (postcode != "" && city == "") {
                    postcode_city = postcode + ", ";
                } else if (postcode == "" && city != "") {
                    postcode_city = city + ", ";
                }

                var full_address = address_1 + address_2 + address_3 + postcode_city + state + "\n" + country;
                return full_address;
            }
            
            function _replace(string, search, replace){
                var my_regex = new RegExp(search, 'g');
                return string.replace(my_regex, replace);
            }
            
            function loadShowModal(modalLocationId, modalId, html){
                $("#" + modalLocationId).html(html);
                customSetup();
                $("#" + modalId).modal("show");
            }
            
            function log(text){
                console.log(text == null? "LOG HERE!" : text);
            }
            
            function isValidEmailAddress(emailAddress) {
                var pattern = /^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
                return pattern.test(emailAddress);
            };
            
            /*]]>*/
        </script>
            
        <!--Form Tools-->
        <script>
            /*<![CDATA[*/
            function resetForm(formId){
                
//                $('#' + formId)[0].reset();
                $("select", "#" + formId).select2("val", "");
                
                $("input", "#" + formId).not("[readonly],[disabled]").val("");
                $("textarea", "#" + formId).not("[readonly],[disabled]").val("");
                $("input:checkbox", "#" + formId).not("[readonly],[disabled]").prop("checked", false);
            }
            
            function resetAndEnableForm(formId){
                resetForm(formId);
                enableForm(formId);
            }
            
            function enableForm(formId){
                $("#" + formId + " :input").prop("disabled", false);
                $("#" + formId + " select").prop("disabled", false);
            }
            
            function disableForm(formId){
                $("#" + formId + " :input").prop("disabled", true);
                $("#" + formId + " select").prop("disabled", true);
            }
            /*]]>*/
        </script>
        
        <!--Ajax Spinner-->
        <script>
            /*<![CDATA[*/
            function ajaxindicatorstart() {
                var imagePath = contextPath + "/static/images/loader.gif";
                var load_image = '<div class="cssload-speeding-wheel"></div>';
                if (jQuery('body').find('#resultLoading').attr('id') !== 'resultLoading') {
                    jQuery('body').append('<div id="resultLoading" style="display:none"><div>'+load_image+'</div><div class="bg"></div></div>');
                }
                jQuery('#resultLoading').css({
                    'width': '100%',
                    'height': '100%',
                    'position': 'fixed',
                    'z-index': '10000000',
                    'top': '0',
                    'left': '0',
                    'right': '0',
                    'bottom': '0',
                    'margin': 'auto'
                });
                jQuery('#resultLoading .bg').css({
                    'background': '#ffffff',
                    'opacity': '0.7',
                    'width': '100%',
                    'height': '100%',
                    'position': 'absolute',
                    'top': '0'
                });
                jQuery('#resultLoading>div:first').css({
                    'width': '250px',
                    'height': '75px',
                    'text-align': 'center',
                    'position': 'fixed',
                    'top': '0',
                    'left': '0',
                    'right': '0',
                    'bottom': '0',
                    'margin': 'auto',
                    'font-size': '16px',
                    'z-index': '10',
                    'color': '#ffffff'
                });
                jQuery('#resultLoading .bg').height('100%');
                jQuery('#resultLoading').fadeIn(300);
                jQuery('body').css('cursor', 'wait');
            }

            function ajaxindicatorstop() {
                jQuery('#resultLoading .bg').height('100%');
                jQuery('#resultLoading').fadeOut(300);
                jQuery('body').css('cursor', 'default');
            }

            jQuery(document).ajaxStart(function () {
            //show ajax indicator
                ajaxindicatorstart();
            }).ajaxStop(function () {
            //hide ajax indicator
                ajaxindicatorstop();
            }).ajaxSuccess(function () {
            //hide ajax indicator
                ajaxindicatorstop();
            }).ajaxError(function () {
                var title = "Error";
                var message = "Request failed, please contact system administrator for further actions.";
                alert4(title, message, 'error');
                ajaxindicatorstop();
            });
            /*]]>*/
        </script>
            
        <!--Others-->
        <script>
            /*<![CDATA[*/
            setSoundPath(contextPath + "/static/sound/");
            
            function showError() {
                webix.ui({
                    view:"window",
                    buttons:["OK"],
                    fullscreen:true,
                    id:"errorDialog",
                    head:{
                        view:"toolbar", css:"toolbar_error", cols:[
                            {view:"label", label: "System Error" },
                            { view:"button", label: "Report", width: 100, align: 'right', click:"$$('errorDialog').close();"},
                            { view:"button", label: "Close", width: 100, align: 'right', click:"$$('errorDialog').close();"}
                        ]
                    },
                    body:{
                        view:"scrollview", body:{
                            rows:[
                                { view: "iframe",src:contextPath+"/private/error" },
                            ]
                        }
                    }
                }).show();
            }
            
            function createCkEditor(id, height) {
                    //create ckeditor
                    return $('#' + id).ckeditor({
                        height: height + 'px', 
                        paste_data_images: true,
                        toolbar : [
                        { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ] },
                        { name: 'editing', groups: [ 'find', 'selection', 'spellchecker' ], items: [ 'Find', 'Replace', '-', 'SelectAll', '-', 'Scayt' ] },
                        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
                        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl', 'Language' ] },
                        { name: 'links', items: [ 'Link', 'Unlink', 'Anchor' ] },
                        { name: 'insert', items: ['Table', 'HorizontalRule', 'SpecialChar', 'PageBreak', 'Image' ] },
                                '/',
                        { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },
                        { name: 'colors', items: [ 'TextColor', 'BGColor' ] },
                        { name: 'tools', items: [ 'Maximize', 'ShowBlocks' ] },
                    ],
                        // Toolbar groups configuration.
                        toolbarGroups : [
                        { name: 'clipboard', groups: [ 'clipboard', 'undo' ] },
                        { name: 'editing', groups: [ 'find', 'selection', 'spellchecker' ] },
                                '/',
                        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ] },
                        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ] },
                        { name: 'links' },
                        { name: 'insert' },
                                '/',
                        { name: 'styles' },
                        { name: 'colors' },
                        { name: 'tools' },
                        { name: 'others' },
                        ]});
                    }
            /*]]>*/
        </script>
        
        <!--UPLOADER-->
        <script>
        /*<![CDATA[*/
            var backUrl = '/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414';
            
            function file_uploader(contextPath, protect, prefix, referenceId, allowContentType, upload_confirmation) {
                var tgtConfigurer = contextPath + "/" + protect + "/upload/configure";
                $.post(tgtConfigurer, function(a) {
                    var uploadMaxSizefile = a.uploadMaxSizefile;
                    file_uploader0(contextPath, protect, prefix, referenceId, allowContentType, upload_confirmation, uploadMaxSizefile);  
                });
            }
                
            function file_uploader0(contextPath, protect, prefix, referenceId, allowContentType, upload_confirmation, uploadMaxSizefile) {    
                
                var tgtUploader = contextPath + "/" + protect + "/upload/" + prefix + "/" + referenceId;
                
                //init button upload
                $('#btn' + referenceId).click(function() {
                    $('#' + referenceId).click();
                });
                
                //hide progress
                $('#progress' + referenceId).hide();

                $('#info' + referenceId).hide();
                        
                //load list
                viewUploader(contextPath, protect, prefix, referenceId);
                
                //init fileupload
                $('#' + referenceId).fileupload({
                    url: tgtUploader,
                    dataType: 'json',
                    progressall: function (e, data) {
                        $('#progress' + referenceId).show();
                        $('#btn' + referenceId).hide();
                        var progress = parseInt(data.loaded / data.total * 100, 10);
                        $('#progress' + referenceId).attr('value', progress);
                        if (progress >= 100) {
                            $('#progress' + referenceId).hide();
                            $('#info' + referenceId).show();
                        }
                    },
                    add: function (e, data) {
                        
                        if(upload_confirmation) {
                            swal({   
                                html: true,
                                title: upload_confirmationTitle,
                                text: upload_confirmationContent,
                                confirmButtonText: "Yes",
                                cancelButtonText: "No",
                                closeOnConfirm: true 
                            }, function(result){
                                if(result) {
                                    fileUpload_onAdd_event(data, protect, prefix, referenceId,uploadMaxSizefile);
                                }
                            });
                        } else {
                            fileUpload_onAdd_event(data, protect, prefix, referenceId,uploadMaxSizefile);
                        }
                        
                    },
                    done: function (e, data) {
                    }
                });
            }
            
            function fileUpload_onAdd_event(data, protect, prefix, referenceId,uploadMaxSizefile){
                resetUploader(referenceId);
                $('#desc' + referenceId).html("");
                var uploadErrors = [];

                if(allowContentType){
                    if (data.originalFiles[0]['type'].length) {
                        var t = data.originalFiles[0]['type'].toLowerCase();
                        var b = 0;
                        var allow;
                        if (allowContentType) {
                            var allow = allowContentType.split(",");
                            for (i = 0; i < allow.length; i++) {
                                if (t.indexOf("/" + allow[i]) != - 1) {
                                    b = 1;
                                    break;
                                }
                            }
                            if (b == 0) {
                                var msg = "";
                                msg += "<b>" + allowContentType.toUpperCase().replace("VND.OPENXMLFORMATS-OFFICEDOCUMENT.WORDPROCESSINGML.DOCUMENT","DOCX").replace("MSWORD","DOC") + "</b>";
                                errorUploader(referenceId, "Only " + msg + " file type allowed");
                                return false;
                            }
                        }
                    } else {
                        if (allowContentType) {
                            var msg = "";
                            msg += "<b>" + allowContentType.toUpperCase().replace("VND.OPENXMLFORMATS-OFFICEDOCUMENT.WORDPROCESSINGML.DOCUMENT","DOCX").replace("MSWORD","DOC") + "</b>";
                            errorUploader(referenceId, "Only " + msg + " file type allowed");
                            return false;
                        }
                    }
                }

                if (data.originalFiles[0]['size'].length && data.originalFiles[0]['size'] > uploadMaxSizefile) {
                    errorUploader(referenceId, 'Filesize is too big');
                    return false;
                }

                data.submit().success(function (result, textStatus, jqXHR) {
                    if (result.success == false) {
                        errorUploader(referenceId, 'ERROR'); 
                    } else {
                        viewUploader(contextPath, protect, prefix, referenceId); 
                    }
                }).error(function (jqXHR, textStatus, errorThrown) {
                    errorUploader(referenceId, textStatus)
                }).complete(function (result, textStatus, jqXHR) {
                });
            }
            
            //view list of fileupload
            var acfsFileNo = 0;
            function viewUploader(contextPath, protect, prefix, referenceId) {
                $('#progress' + referenceId).hide();
                $('#info' + referenceId).hide();
                $('#desc' + referenceId).html("");
                var tgtViewer = contextPath + "/" + protect + "/upload/view/" + prefix + "/" + referenceId;
                $("#div" + referenceId).html("<i class='fa fa-gear fa-spin'></i>");
                $.get(tgtViewer, function(data) {
                    $("#div" + referenceId).html(data);
                    $("[title]").tooltip();
                    $('#btn' + referenceId).show();
                }).error(function() {
                    $("#div" + referenceId).html("Error");
                    $('#btn' + referenceId).show();
                });
            }

            function errorUploader(id, textStatus) {
                $('#desc' + id).html("<span class='alert alert-danger'>" + textStatus + "</span>");
                $('#progress' + id).hide();
                $('#info' + referenceId).hide();
                $('#btn' + id).show();
            }

            function resetUploader(id) {
                $('#desc' + referenceId).html("");
                $('#progress' + id).show();
                $('#btn' + id).show();
                $('#info' + referenceId).hide();
            }
                    
            function doDeleteUploader(thiz) {
                var tgtTitleConfirmDelete = 'Are you sure to delete file?';
                var text = 'File will be permanently deleted.';
                var buttonNo = 'No';
                var buttonYes = 'Yes';

                alertCallbackYN(tgtTitleConfirmDelete, text, '', function(){
                    $.post($(thiz).attr('zhref'), function(r) {
                        viewUploader(r.contextPath, r.protect, r.prefix, r.referenceId);
                    });
                }, function(){
                });
            }
                    
            function doViewUploader(thiz) {
                window.open($(thiz).attr('zhref'));
            }
        /*]]>*/
        </script>
        
        <!--TinyMCE-->
        <script>
            /*<![CDATA[*/
            
            //initialize editor
            function createEditor(idEditor) {
                tinymce.init({
                    selector: "textarea#"+idEditor
                        , theme: "modern"
                        , height: 1000
                        , plugins: [
                            "advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker"
                            , "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking"
                            , "save table contextmenu directionality emoticons template paste textcolor lineheight"
                        ]
                        , toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons | sizeselect | bold italic | fontselect |  fontsizeselect | lineheightselect"
                        ,lineheight_formats: "8pt 9pt 10pt 11pt 12pt 14pt 16pt 18pt 20pt 22pt 24pt 26pt 36pt"
                ,});
            }
            
            function createMinimalEditor(idEditor) {
                tinymce.init({
                    selector: "textarea#"+idEditor,
                        height: 200,
                        menubar: false,
                        statusbar: true,
                        toolbar: false
                ,});
            }
            
            /*]]>*/
        </script>
        
    <script src="chrome-extension://mooikfkahbdckldjjndioackbalphokd/assets/prompt.js"></script></head>
    
    <!--Content-->
    <body id="content" data-gr-c-s-loaded="true" style="cursor: default;">

        <!--Title-->
        <div class="panel panel-default">
            <div style="padding: 10px; font-weight: normal" class="panel-heading">
            <span>LESEN BORONG BARANG KAWALAN BERJADUAL (CSA)</span>
            <div class="note">Borang Permohonan Pindaan</div>
        </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">

            <!--Form-->
            <form id="myform" method="POST" class="form-horizontal" autocomplete="off">
                <input style="display: none; padding-left: 10px;" type="input" id="action" name="action">
                <textarea style="display: none; padding-left: 10px;" id="tgtBack" name="tgtBack">http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licLicenseRequest</textarea>

                <!--Panel-->
                <div class="form-group form-group-sm">
                    <div class="panel-group" id="accordion">

                        <!--Bahagian A-->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianA">Bahagian A - Jenis Pindaan</a></h4> 
                            </div>
                            <div id="bahagianA" class="panel-collapse collapse">
                                <div class="panel-body"> 
                                    <div class="form-group form-group-sm">
    <label class="col-md-2 control-label">No. Lesen</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="ab15646" style="padding-left: 10px;">
    </div>

    <label class="col-md-2 control-label">No. Serahan BLESS</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="BL2015039987" style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-2 control-label">Jenis Lesen Borong</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="Minyak Masak" style="padding-left: 10px;">
    </div>

    <label class="col-md-2 control-label">No. Rujukan Pendaftaran Syarikat</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="37441-T" style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-2 control-label">Nama Syarikat</label>
    <div class="col-md-10">
        <input type="text" class="form-control input-sm" readonly="" value="SOON SOON OILMILLS SDN. BHD." style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-2 control-label">Tarikh Kuatkuasa Lesen</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="02/11/2015" style="padding-left: 10px;">
    </div>

    <label class="col-md-2 control-label">Tarikh Tamat Sah Laku Lesen</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="11/11/2020" style="padding-left: 10px;">
    </div>
</div>

<br>
<div class="form-group form-group-sm">
    <div class="label-title">Jenis Pindaan</div>

    <div style="display: none;" class="form-group form-group-sm">
        <label class="col-md-2 control-label">??isChangeQuantityCopy_en_US??</label>
        <div class="col-md-4">
            <input type="text" class="form-control input-sm" id="isChangeQuantityCopy" name="isChangeQuantityCopy" style="padding-left: 10px;">
        </div>
    </div>

    <div class="form-group form-group-sm">
        <div class="col-md-offset-2">
            <div class="col-md-4">
                <div class="checkbox checkbox-primary">
                    <input class="change_checkbox" id="isChangeAddress" name="isChangeAddress" type="checkbox" style="padding-left: 10px;">
                    <label for="isChangeAddress">Perubahan Alamat Perniagaan</label>
                </div>
            </div>

            <div class="col-md-4">
                <div class="checkbox checkbox-primary">
                    <input class="change_checkbox" id="isChangeItem" name="isChangeItem" type="checkbox" style="padding-left: 10px;">
                    <label for="isChangeItem">Perubahan Jenis Barang Kawalan</label>
                </div>
            </div>

            <div class="col-md-4">
                <div class="checkbox checkbox-primary">
                    <input class="change_checkbox" id="isChangeQuantity" name="isChangeQuantity" type="checkbox" style="padding-left: 10px;">
                    <label for="isChangeQuantity">Perubahan Had Kuantiti dan Alamat Stor</label>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="control-label col-md-2 required"><span><span><span>Sebab Pertukaran</span></span><b id="label_required_" style="color: red"> </b></span><b id="label_required_" style="color: red"> *</b></label>
    <div class="col-md-10">
        <textarea rows="5" id="changeReason" name="changeReason" style="padding-left: 10px;"></textarea>
    </div>
</div>


                                </div>
                            </div>
                        </div>

                        <!--Bahagian B-->
                        <div id="b_panel" class="panel panel-default" style="display: none;">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianB">Bahagian B - Perubahan Alamat Perniagaan</a></h4> 
                            </div>
                            <div id="bahagianB" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <div class="bg-info notice-primary">Sila buat pembelian data SSM sekiranya ada membuat sebarang perubahan/pindaan pada maklumat syarikat</div>

<div class="form-group form-group-sm">
    
    <div class="col-md-6">
        <div class="label-title">Cawangan Agensi Pemprosesan Lama</div>

        <div class="form-group form-group-sm">
            <label class="col-md-2 control-label">Negeri</label>
            <div class="col-md-10">
                <input type="text" class="form-control" disabled="" value="" style="padding-left: 10px;">
            </div>
        </div>

        <div class="form-group form-group-sm">
            <label class="col-md-2 control-label">Cawangan</label>
            <div class="col-md-10">
                <textarea rows="2" disabled="" style="padding-left: 10px;">Kementerian Perdagangan Dalam Negeri, Koperasi dan Kepenggunaan (KPDNKK - Pulau Pinang)</textarea>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="label-title">Cawangan Agensi Pemprosesan Baru</div>

        <div class="form-group form-group-sm">
            <label class="col-md-2 control-label required"><span><span>Negeri</span><b id="label_required_" style="color: red"> </b></span><b id="label_required_" style="color: red"> *</b></label>
            <div class="col-md-10">
                <div class="select2-container form-control dropdown-select2" id="s2id_agencyStateCode" title="" data-original-title=""><a href="javascript:void(0)" class="select2-choice" tabindex="-1">   <span class="select2-chosen" id="select2-chosen-3">Please select</span><abbr class="select2-search-choice-close"></abbr>   <span class="select2-arrow" role="presentation"><b role="presentation"></b></span></a><label for="s2id_autogen3" class="select2-offscreen"></label><input class="select2-focusser select2-offscreen" type="text" aria-haspopup="true" role="button" aria-labelledby="select2-chosen-3" id="s2id_autogen3"><div class="select2-drop select2-display-none select2-with-searchbox">   <div class="select2-search">       <label for="s2id_autogen3_search" class="select2-offscreen"></label>       <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="select2-input" role="combobox" aria-expanded="true" aria-autocomplete="list" aria-owns="select2-results-3" id="s2id_autogen3_search" placeholder="">   </div>   <ul class="select2-results" role="listbox" id="select2-results-3">   </ul></div></div><select class="form-control dropdown-select2 select2-offscreen" id="agencyStateCode" name="agencyStateCode" title="" data-original-title="" tabindex="-1">
                    <option value="">Please select</option>                                                        
                    <option value="01">JOHOR</option>                                                        
                    <option value="02">KEDAH</option>                                                        
                    <option value="03">KELANTAN</option>                                                        
                    <option value="04">MELAKA</option>                                                        
                    <option value="05">NEGERI SEMBILAN</option>                                                        
                    <option value="06">PAHANG</option>                                                        
                    <option value="08">PERAK</option>                                                        
                    <option value="09">PERLIS</option>                                                        
                    <option value="07">PULAU PINANG</option>                                                        
                    <option value="12">SABAH</option>                                                        
                    <option value="13">SARAWAK</option>                                                        
                    <option value="10">SELANGOR</option>                                                        
                    <option value="11">TERENGGANU</option>                                                        
                    <option value="14">WILAYAH PERSEKUTUAN KUALA LUMPUR</option>                                                        
                    <option value="15">WILAYAH PERSEKUTUAN LABUAN</option>                                                        
                    <option value="16">WILAYAH PERSEKUTUAN PUTRAJAYA</option>
                </select>
            </div>
        </div>

        <div class="form-group form-group-sm">
            <label class="col-md-2 control-label required"><span><span>Cawangan</span><b id="label_required_" style="color: red"> </b></span><b id="label_required_" style="color: red"> *</b></label>
            <div class="col-md-10">
                <div class="select2-container form-control dropdown-select2" id="s2id_licenseAgencyId" title="" data-original-title=""><a href="javascript:void(0)" class="select2-choice" tabindex="-1">   <span class="select2-chosen" id="select2-chosen-4">Please select</span><abbr class="select2-search-choice-close"></abbr>   <span class="select2-arrow" role="presentation"><b role="presentation"></b></span></a><label for="s2id_autogen4" class="select2-offscreen"></label><input class="select2-focusser select2-offscreen" type="text" aria-haspopup="true" role="button" aria-labelledby="select2-chosen-4" id="s2id_autogen4"><div class="select2-drop select2-display-none select2-with-searchbox">   <div class="select2-search">       <label for="s2id_autogen4_search" class="select2-offscreen"></label>       <input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="select2-input" role="combobox" aria-expanded="true" aria-autocomplete="list" aria-owns="select2-results-4" id="s2id_autogen4_search" placeholder="">   </div>   <ul class="select2-results" role="listbox" id="select2-results-4">   </ul></div></div><select class="form-control dropdown-select2 select2-offscreen" id="licenseAgencyId" name="licenseAgencyId" title="" data-original-title="" tabindex="-1">
                    <option value="">Please select</option>                                                        
                </select>
            </div>
        </div>
    </div>
    
</div>

<hr>

<div class="form-group form-group-sm">
    <div class="col-md-6">
        <div class="well background_previous">
            <div class="form-group form-group-sm">
                <div class="label-title">
                    <span>Alamat Perniagaan Lama</span>
                </div>
                <div class="col-md-12">
                    <div class="form-group form-group-sm">                  
                        <textarea id="p_address" rows="7" name="p_address" readonly="" style="padding-left: 10px;">2448, LORONG PERUSAHAAN 2
PRAI INDUSTRIAL ESTATE
N/A
13600, PULAU PINANG
</textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="well">
            <div class="form-group form-group-sm">
                <div class="label-title">
                    <span>Alamat Perniagaan Baru</span>
                </div>
                <div style="display: none;" class="form-group form-group-sm">
                    <label class="col-md-3 control-label">??Address ID_en_US??</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control input-sm" id="addressId" name="addressId" readonly="" style="padding-left: 10px;">
                    </div>
                </div>
                <div class="col-md-12">
                    <textarea rows="5" id="newAddress" name="newAddress" readonly="" style="padding-left: 10px;"></textarea>
                </div>
            </div>
            <div class="form-group form-group-sm">
                <div class="col-md-12">
                    <button style="width: 100%;" type="button" id="btnChooseNewAddress" class="btn btn-primary btn-sm">Select/Edit</button>
                </div>
            </div>
        </div>
    </div>
</div>

<hr>

<div class="form-group form-group-sm">
    <div class="col-md-6">
        <div class="well background_previous">
            <div class="form-group form-group-sm">
                <div class="label-title">
                    <span>Alamat Surat Menyurat Lama</span>
                </div>
                <div class="col-md-12">
                    <div class="form-group form-group-sm">                  
                        <textarea id="correspondence" rows="7" name="correspondence" readonly="" style="padding-left: 10px;"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="well">
            <div class="form-group form-group-sm">
                <div class="label-title">
                    <span>Alamat Surat Menyurat Baru</span>
                </div>
                <div style="display: none;" class="form-group form-group-sm">
                    <label class="col-md-3 control-label">??Address ID_en_US??</label>
                    <div class="col-md-6">
                        <input type="text" class="form-control input-sm" id="corrAddressId" name="corrAddressId" readonly="" style="padding-left: 10px;">
                    </div>
                </div>
                <div class="col-md-12">
                    <textarea rows="5" id="newCorrespondence" name="newCorrespondence" readonly="" style="padding-left: 10px;"></textarea>
                </div>
            </div>
            <div class="form-group form-group-sm">
                <div class="col-md-12">
                    <button style="width: 100%;" type="button" id="btnChooseNewcorrespondence" class="btn btn-primary btn-sm">Select/Edit</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    /*<![CDATA[*/
    $(function () {
        selected_address_id = $("#addressId").val();
        if (selected_address_id !== '') {
            newAddressSelect();
        }

        selected_address_id = $("#corrAddressId").val();
        if (selected_address_id !== '') {
            mailingAddressSelect2;
        }
        
        if(prev_csaMain.addressId != null) {
            loadAddressToTextarea("p_address", prev_csaMain.addressId);
        }
        
        if(prev_csaMain.isSameAddress) {
            $("#correspondence").val($("#p_address").val());
        } else {
            if(prev_csaMain.corrAddressId != null) {
                loadAddressToTextarea("correspondence", prev_csaMain.corrAddressId);
            }
        }

    });

    $("#btnChooseNewAddress").click(function () {
        loadUsrAddressListModal(8, newAddressSelect);
    });



    function newAddressSelect() {
        var id = selected_address_id;
        $.ajax({
            url: context + "usrAddress/ajax/getUsrAddress/" + id,
            method: "GET",
            success: function (data) {
                $("#addressId", "#myform").val(data.addressId);
                var address = formatAddressVertical(data.address1, data.address2, data.address3, data.postcode, data.cityName, data.stateName, '');
                $('#newAddress').val(address);
            }
        });
    }

    $("#btnChooseNewcorrespondence").click(function () {
        loadUsrAddressListModal(2, mailingAddressSelect2);
    });

    function mailingAddressSelect2() {
        var id = selected_address_id;
        $.ajax({
            url: context + "usrAddress/ajax/getUsrAddress/" + id,
            method: "GET",
            success: function (data) {
                $("#corrAddressId", "#myform").val(data.addressId);
                var address = formatAddressVertical(data.address1, data.address2, data.address3, data.postcode, data.cityName, data.stateName, '');
                $('#newCorrespondence').val(address);
            }
        });
    }

    function loadNewAddress(id) {
        $.ajax({
            url: context + "usrAddress/ajax/getUsrAddress/" + id,
            method: "GET",
            success: function (data) {
                $("#addressId", "#myform").val(data.addressId);
                var address = formatAddressVertical(data.address1, data.address2, data.address3, data.postcode, data.cityName, data.stateName, '');
                $('#newAddress').val(address);

            }
        });
    }

    function loadNewCorrespondenceAddress(id) {
        $.ajax({
            url: context + "usrAddress/ajax/getUsrAddress/" + id,
            method: "GET",
            success: function (data) {
                $("#corrAddressId", "#myform").val(data.addressId);
                var correspondance = formatAddressVertical(data.address1, data.address2, data.address3, data.postcode, data.cityName, data.stateName, '');
                $('#newCorrespondence').val(correspondance);

            }
        });
    }
    /*]]>*/
</script>   
                                </div>
                            </div>
                        </div>

                        <!--Bahagian C-->
                        <div id="c_panel" class="panel panel-default" style="display: none;">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianC">Bahagian C - Perubahan Jenis Barang Kawalan</a></h4> 
                            </div>
                            <div id="bahagianC" class="panel-collapse collapse">
                                <div class="panel-body"> 
                                    <div class="bg-info notice-primary">Sekiranya pemohon membuat penambahan pada jenis barang kawalan, pemohon perlu mengemaskini maklumat jenis barang kawalan yang baru di Bahagian D</div>

<!--Barang Kawalan Lama-->

<div class="form-group form-group-sm">
    <div class="col-md-6">
        <div class="label-title">Barang Kawalan Lama</div>

        <div class="form-group form-group-sm">
            <label class="col-md-3 control-label">Borong</label>
        </div> 

        <div class="form-group form-group-sm">
            <div class="col-md-offset-3">

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="P" itemcode="RON97" style="padding-left: 10px;">
                        <label>Petrol (RON 97)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="P" itemcode="RON95" style="padding-left: 10px;">
                        <label>Petrol (RON 95)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="C" itemcode="CHICK" style="padding-left: 10px;">
                        <label>Ayam</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="A" itemcode="KERSN" style="padding-left: 10px;">
                        <label>Minyak Tanah</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="A" itemcode="FLOUR" style="padding-left: 10px;">
                        <label>Tepung Gandum</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="G" itemcode="LPG" style="padding-left: 10px;">
                        <label>Gas Petroleum Cecair</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="S" itemcode="CMNT" style="padding-left: 10px;">
                        <label>Simen</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="P" itemcode="RON100" style="padding-left: 10px;">
                        <label>Petrol (RON 100)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="B" itemcode="RNDBAR" style="padding-left: 10px;">
                        <label>Bar Bulat Keluli Lembut</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="A" itemcode="SUGAR" style="padding-left: 10px;">
                        <label>Gula</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="P" itemcode="DIES2M" style="padding-left: 10px;">
                        <label>Diesel (Euro 2M)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="A" itemcode="BAJA" style="padding-left: 10px;">
                        <label>Baja</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="P" itemcode="DIES5" style="padding-left: 10px;">
                        <label>Diesel (Euro 5)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="A" itemcode="CKOIL" checked="checked" style="padding-left: 10px;">
                        <label>Minyak Masak</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="previous_goodsCheck" type="checkbox" disabled="" groupcode="D" itemcode="BUNKER" style="padding-left: 10px;">
                        <label>Diesel Bunkering</label>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!--Barang Kawalan Baru-->
    <div class="col-md-6">
        <div class="label-title">Barang Kawalan Baru</div>

        <div class="form-group form-group-sm">
            <label class="col-md-3 control-label">Borong</label>
        </div> 

        <div class="form-group form-group-sm">
            <div class="col-md-offset-3">

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="P" id="id_10" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_10">Petrol (RON 97)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="P" id="id_5" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_5">Petrol (RON 95)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="C" id="id_3" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_3">Ayam</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="A" id="id_13" style="padding-left: 10px;">
                        <label for="id_13">Minyak Tanah</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="A" id="id_4" style="padding-left: 10px;">
                        <label for="id_4">Tepung Gandum</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="G" id="id_9" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_9">Gas Petroleum Cecair</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="S" id="id_2" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_2">Simen</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="P" id="id_6" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_6">Petrol (RON 100)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="B" id="id_11" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_11">Bar Bulat Keluli Lembut</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="A" id="id_1" style="padding-left: 10px;">
                        <label for="id_1">Gula</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="P" id="id_7" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_7">Diesel (Euro 2M)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="A" id="id_15" style="padding-left: 10px;">
                        <label for="id_15">Baja</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="P" id="id_14" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_14">Diesel (Euro 5)</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="A" id="id_8" checked="checked" style="padding-left: 10px;">
                        <label for="id_8">Minyak Masak</label>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="checkbox checkbox-primary">
                        <input class="goodsCheck" type="checkbox" groupcode="D" id="id_18" style="padding-left: 10px;" disabled="disabled">
                        <label for="id_18">Diesel Bunkering</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<hr>

<div class="form-group form-group-sm">
    <div class="col-md-12">
        <div class="label-title">Maklumat Lengkap Syarikat Pembekal</div>

        <div id="itemSupplierListLocation"><table id="b_table" class="table table-hover table-condensed">
    <tbody><tr class="info">
        <th>No</th>
        <th>Nama Barang</th>
        <th>Alamat Syarikat Pembekal</th>
        <th><div align="middle">Action</div></th>
    </tr>
    
    <tr>
        <td>1</td>
        <td>Minyak Masak</td>
        <td></td>
        <td align="middle">
            <button type="button" class="btn btn-primary btn-sm btnEditItemSupplier" id="496741">Edit</button>
        </td>
    </tr>
</tbody></table></div>
    </div>
</div>

<script>
    /*<![CDATA[*/
    $(".goodsCheck").change(function () {
        var checked = $(this).prop('checked');
        var id = this.id.replace('id_', '');
        var element_id = this.id;
        if (checked) {
            $.ajax({
                url: context + "licKpdnkkCsaItem/ajax/add/" + csaMain.csaMainId + "/" + id,
                method: "GET",
                success: function () {
                    loadItemList();
                    loadItemSupplierList();
                }
            })
        } else {

            $.ajax({
                url: context + "licKpdnkkCsaItem/ajax/delete/" + csaMain.csaMainId + "/" + id,
                method: "GET",
                success: function () {
                    loadItemList();
                    loadItemSupplierList();
                }
            })

        }
        checkGoodsCheckbox();
    });

    function checkGoodsCheckbox() {
        var temp_group_code = "";
        $(".previous_goodsCheck:checked").each(function () {
            var group_code = $(this).attr('groupCode');
            if (group_code) {
                temp_group_code = group_code;
            }
        });

        if (temp_group_code == "") {
            $(".goodsCheck").prop('disabled', false);
        } else {

            var checked_id = $(".goodsCheck:checked").attr('id');
            if (checked_id == null) {
                $(".goodsCheck").each(function () {
                    var group_code = $(this).attr('groupCode');
                    if (group_code == temp_group_code) {
                        $(this).attr('disabled', false);
                    } else {
                        $(this).attr('disabled', true);
                    }
                });
            } else {
                $(".goodsCheck").each(function () {
                    $(this).attr('disabled', true);
                });

                $("#" + checked_id).attr('disabled', false);
            }

        }
        if (temp_group_code == "P") {
            validationType = "P";
            $("#pdaReferenceNoRequired").show();
            $("#fireReferenceNoRequired").show();
        } else if (temp_group_code == "G") {
            validationType = "G";
            $("#pdaReferenceNoRequired").hide();
            $("#fireReferenceNoRequired").show();
        } else {
            validationType = "default";
            $("#pdaReferenceNoRequired").hide();
            $("#fireReferenceNoRequired").hide();
        }
        customSetup();
    }
    
    function checkBunker() {
        var prevItemCode = $('.previous_goodsCheck:checked').attr('itemCode');
        if (prevItemCode == "BUNKER") {
            $(".goodsCheck").prop('disabled', true);
            $("#d_panel").hide();
            return true;
        } else {
            return false;
        }   
    }

    /*]]>*/
</script>
                                </div>
                            </div>
                        </div>

                        <!--Bahagian D-->
                        <div id="d_panel" class="panel panel-default" style="display: none;">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianD">Bahagian D - Perubahan Had Kuantiti Simpanan dan Alamat Stor</a></h4> 
                            </div>
                            <div id="bahagianD" class="panel-collapse collapse">
                                <div class="panel-body"> 
                                    <div class="label-title">Had Kuantiti Lama</div>
                                    
<div id="previousItemListLocation"><table class="table table-condensed table-hover">
    <tbody><tr class="info">
        <th>No</th>
        <th>Nama Barang</th>
        <th><div align="center">Kuantiti</div></th>
        <th>Alamat Stor(Tempat Simpanan Barang)</th>
    </tr>
    <tr>
        <td>1</td>
        <td>Minyak Masak</td>
        <td align="middle">8,000.00 (MT)</td>
        <td></td>
    </tr>
</tbody></table></div>

<div class="label-title">Had Kuantiti Baru</div>

<div id="itemListLocation"><table id="csaItemList" class="table table-condensed table-hover">
    <tbody><tr class="info">
        <th>No</th>
        <th>Nama Barang</th>
        <th><div align="center">Kuantiti</div></th>
        <th class="required">Alamat Stor(Tempat Simpanan Barang)</th>
        <th><div align="middle">Action</div></th>
    </tr>
    
    <tr>
        <td>1</td>
        <td>Minyak Masak</td>
        <td align="middle">8,000.00 (MT)</td>
        <td></td>
        <td align="middle">
            <button type="button" class="btn btn-primary btn-sm btnEditItem" id="496741">Edit</button>
        </td>
    </tr>
</tbody></table></div>

<!--<div class='form-group'>
    <label class="control-label col-md-2 required"><span th:text="#{csa.rfc.d_quantiti_change_reason}"/></label>
    <div class='col-md-10'>
        <textarea rows="5" id="changeReason" name="changeReason" th:text="${csaMain.changeReason}"/>
    </div>
</div>-->


<script>
    /*<![CDATA[*/
    var active_item_id = "";

    function loadPreviousItemList(){
        $.ajax({
           url: context + "licKpdnkkCsaItem/ajax/loadPreviousItemList/" + prev_csaMain.csaMainId,
           method: "GET",
           success: function(data){
               $("#previousItemListLocation").html(data);
           }
        });
    }

    function loadItemList(){
        $.ajax({
           url: context + "licKpdnkkCsaItem/ajax/loadItemList/" + csaMain.csaMainId,
           method: "GET",
           success: function(data){
               $("#itemListLocation").html(data);

               $(".btnEditItem").click(function(){
                   var item_id = this.id;
                   loadItemFormModal(item_id);
               });
           }
        });
    }

    function loadItemFormModal(csaItemId) {
        $.ajax({
            url: context + "licKpdnkkCsaItem/ajax/loadItemFormModal/" + csaItemId,
            method: "GET",
            success: function(data){
                $("#itemFormModalLocation").html(data);
                customSetup();
                loadItemStoreAddressList(csaItemId);
                $("#itemFormModal").modal("show");

                $("#btnSaveItem").click(function(){

                    var item_form_result = validateForm([
                        {id: "quantity", message: "'Jumlah Kuantiti'"},
                        {id: "uom", message: "'Unit of Measurement'"}
                    ], "itemForm");

                    if(item_form_result == 0) {
                        $.ajax({
                            url: context + "licKpdnkkCsaItem/ajax/updateItem",
                            method: "POST",
                            data: $("#itemForm").serialize(),
                            success: function(){
                                loadItemList();
                                $("#itemFormModal").modal("hide");
                            }
                        });
                    }

                });

                $(".btnAddStoreAddress").click(function(){
                    active_item_id = this.id;
                    loadUsrAddressListModal(3, storeAddressSelect);
                });
            }
        });
    }

    function storeAddressSelect(){
        var csaItemId = active_item_id;
        var addressId = selected_address_id;
        $.ajax({
            url: context + "licKpdnkkCsaAddr/ajax/add/" + csaItemId + "/" + addressId,
            method: "GET",
            success: function(){
                loadItemList();
                loadItemStoreAddressList(csaItemId);
                $("#storeAddressListModal").modal("hide");
            }
        })
    }

    function loadItemStoreAddressList(csaItemId){
        $.ajax({
            url: context + "licKpdnkkCsaItem/ajax/loadItemStoreAddressList/" + csaItemId,
            method: "GET",
            success: function(data){
                $("#itemStoreAddressListLocation").html(data);

                $(".btnDeleteitemStoreAddress").click(function(){
                    var id = this.id;

                    alertCallbackYN('Are you sure to delete data?', 'Record(s) will be permanently deleted.', '', function(){

                        $.ajax({
                            url: context + "licKpdnkkCsaAddr/ajax/delete/" + id,
                            method: "GET",
                            success: function(){
                                loadItemStoreAddressList(csaItemId);
                                loadItemList();
                            }
                        }) 

                    }, function(){
                    });

                });
            }
        })
    }

    /*]]>*/
</script>
                                </div>
                            </div>
                        </div>

                        <!--Bahagian D bunkering-->
                        <div id="isBunkering" class="panel panel-default hide">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianDBunkering">Bahagian D - Perubahan Had Kuantiti Simpanan dan Alamat Stor Diesel (Bunkering)</a></h4> 
                            </div>
                            <div id="bahagianDBunkering" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <div class="label-title">Had Kuantiti Lama dan Nama Pelabuhan</div>

<div id="itemListLocationPrevBun"><table id="csaWsVessel" class="table table-condensed">
    <tbody><tr class="info">
        <th>No</th>
        <th>Nama Kapal</th>
        <th>Kuantiti</th>
        <th>Nama Pelabuhan</th>
    </tr>
    <tr>
        <td align="middle" colspan="5">No Record Found</td>
    </tr>
    
</tbody></table></div>

<div class="label-title">Had Kuantiti Baru dan Nama Pelabuhan</div>

<div id="itemListLocationCurrBun"><table id="csaWsVessel" class="table table-condensed">
    <tbody><tr class="info">
        <th>No</th>
        <th>Nama Kapal</th>
        <th>Kuantiti</th>
        <th>Nama Pelabuhan</th>
        <th>Action</th>
    </tr>
    <tr>
        <td align="middle" colspan="5">No Record Found</td>
    </tr>
    
</tbody></table></div>
<div class="form-group form-group-sm">
    <button id="btnAddBun" type="button" class="btn btn-primary">Add</button>
</div>

<!-- previous -->
<script>
/*<![CDATA[*/

    function loadVesselPrev() {
        $.ajax({
            url: context + "licKpdnkkCsaWsVessel/ajax/viewloadVessel/" + prev_csaMain.csaMainId,
            method: "GET",
            success: function(listHtml) {
                    $("#itemListLocationPrevBun").html(listHtml);
            }
        });
    }

/*]]>*/
</script>

<!-- current -->
<script>
/*<![CDATA[*/
 
    function loadVessel(){
        $.ajax({
           url: context + "licKpdnkkCsaWsVessel/ajax/newLoadVessel/" + csaMain.csaMainId,
           method: "GET",
           success: function(listHtml) {
               $("#itemListLocationCurrBun").html(listHtml);
               $(".btnEditVessel").click(function(){
                    var vesselId2 = this.id;
                    loadVesselFormModalEdit(vesselId2);
                });
               $(".btnDeleteVessel").click(function(){
                   var vesselId = this.id;
                    alertCallbackYN('Are you sure to delete data?', 'Record(s) will be permanently deleted.', '', function(){

                        $.ajax({
                            url: context + "licKpdnkkCsaWsVessel/ajax/delete/" + vesselId,
                            method: "GET",
                            success: function(){
                                loadVessel();
                            }
                        })

                    }, function(){
                    });

               });
           }
        });
    }

    $("#btnAddBun").click(function () {
        loadVesselFormModal();
        loadItemVesselPortList();
    })

    function loadVesselFormModal(){
        $.ajax({
            url: context + "licKpdnkkCsaWsVessel/ajax/loadVesselFormModal",
            method: "GET",
            success: function(formHtml){
                $("#vesselFormModalLocation").html(formHtml);
                customSetup();
                $("#vesselFormModal").modal("show");

                $("#btnSaveBun").click(function(){
                    var vesselFormValidation = validateForm([
                        {id: "vesselName", message: "'Nama Kapal'"},
                        {id: "quantity", message: "'Kuantiti'"}
                    ], "vesselForm");

                    if(vesselFormValidation == 0) {
                        $.ajax({
                            url: context + "licKpdnkkCsaWsVessel/ajax/add/" + csaMain.csaMainId,
                            method: "POST",
                            data: $("#vesselForm").serialize(),
                            success: function(){
                                $("#vesselFormModal").modal("hide");
                                loadVessel();
                            }
                        });
                    }
                });
            }
        })
    }

    function loadItemVesselPortList(){
        $.ajax({
            url: context + "licKpdnkkCsaWsVesselPortDetails/ajax/loadItemVesselPortList/" +csaMain.csaMainId,
            method: "GET",
            success: function(data){
                $("#itemVesselPortListLocation").html(data);
                $(".btnDeleteVesselPort").click(function(){
                    var id = this.id;
                    alertCallbackYN('Are you sure to delete data?', 'Record(s) will be permanently deleted.', '', function(){

                        $.ajax({
                            url: context + "licKpdnkkCsaWsVesselPortDetails/ajax/deleteById/" + id,
                            method: "GET",
                            success: function(){
                                loadItemVesselPortList();
                            }
                        });
                        }, function(){
                    });
                });

                $(".btnAddVesselPort").click(function () {
                    loadVesselPortListSelect();

                });
            }
        });
    }

    function loadVesselPortListSelect(){
        $.ajax({
            url: context + "licKpdnkkCsaWsVesselPort/ajax/loadVesselPortListSelect" ,
            method: "GET",
            success: function(modalHtml) {
                $("#vesselPortSelectListLocation").html(modalHtml);
                loadVesselPortList();
                $("#vesselPortListSelect").modal("show");

                $("#btnAddNewVesselPort").click(function(){
                    loadVesselPortFormModal();
                });
            }
        })
    }

    function loadVesselPortList(){
        $.ajax({
           url: context + "licKpdnkkCsaWsVesselPort/ajax/loadVesselPortList/"+ csaMain.csaMainId,
           method: "GET",
           success: function(listHtml) {
                $("#vesselPortListSelectLocation").html(listHtml);

                $(".btnSelectVesselPort").click(function(){
                    var selected = $(this).attr('selectid');
                    setSelectedVesselPort(selected)

                });

                $(".btnDeleteVesselPort").click(function(){
                    var selected = $(this).attr('selectid');
                    $.ajax({
                       url: context + "licKpdnkkCsaWsVesselPort/ajax/deleteById/" + selected,
                            method: "GET",
                            success: function(){
                                loadVesselPortListSelect();
                            }
                    });
                });
           }
        });
    }

    function loadVesselPortFormModal(){
        $.ajax({
            url: context + "licKpdnkkCsaWsVesselPort/ajax/loadVesselPortFormModal",
            method: "GET",
            success: function(formHtml){
                $("#vesselPortFormModalLocation").html(formHtml);
                customSetup();
                $("#vesselPortFormModal").modal("show");

                $("#btnSaveVesselPorts").click(function(){
                    var vesselPortFormValidation = validateForm([
                        {id: "vesselPortName", message: "'Nama Pelabuhan'"},
                        {id: "stateCode", message: "'Negeri'"}
                    ], "vesselPortForm");

                    if(vesselPortFormValidation == 0) {
                        $.ajax({
                            url: context + "licKpdnkkCsaWsVesselPort/ajax/add/" + csaMain.csaMainId,
                            method: "POST",
                            data: $("#vesselPortForm").serialize(),
                            success: function(){
                                $("#vesselPortFormModal").modal("hide");
                                  loadVesselPortListSelect();
                            }
                        });
                    }
                });
            }
        })

    }

    function setSelectedVesselPort(vesselPortId){
        $("#vesselPortListSelect").modal("hide");

        $.ajax({
            url: context + "licKpdnkkCsaWsVesselPortDetails/ajax/add/" + csaMain.csaMainId + "/" + vesselPortId,
            method: "POST",
//                    data: $("#vesselForm").serialize(),
            success: function(data){
                loadItemVesselPortList();
            }
        });

    }

    /*edit function*/
    function loadVesselFormModalEdit(vesselId){
        $.ajax({
            url: context + "licKpdnkkCsaWsVessel/ajax/loadVesselFormModalEdit/"+vesselId,
            method: "GET",
            success: function(formHtml){
                $("#vesselEditFormModalLocation").html(formHtml);
                customSetup();
                loadItemVesselPortListEdit(vesselId);
                $("#vesselEditFormModal").modal("show");

                $("#btnSaveBunEdit").click(function(){
                    var vesselFormValidation = validateForm([
                        {id: "vesselNameEdit", message: "'Nama Kapal'"},
                        {id: "quantityEdit", message: "'Kuantiti'"}
                    ], "vesselEditForm");

                    if(vesselFormValidation == 0) {
                        $.ajax({
                            url: context + "licKpdnkkCsaWsVessel/ajax/update/" + csaMain.csaMainId + "/" +vesselId,
                            method: "POST",
                            data: $("#vesselEditForm").serialize(),
                            success: function(){
                                $("#vesselEditFormModal").modal("hide");
                                loadVessel();
                            }
                        });
                    }
                });
            }
        });
    }

    function loadItemVesselPortListEdit(vesselId){
                $.ajax({
                    url: context + "licKpdnkkCsaWsVesselPortDetails/ajax/loadItemVesselPortListEdit/" + csaMain.csaMainId+"/"+vesselId,
                    method: "GET",
                    success: function(data){
                        $("#itemVesselPortListEditLocation").html(data);
                        $(".btnDeleteVesselPort").click(function(){
                            var id = this.id;
                            alertCallbackYN('Are you sure to delete data?', 'Record(s) will be permanently deleted.', '', function(){

                                $.ajax({
                                    url: context + "licKpdnkkCsaWsVesselPortDetails/ajax/deleteById/" + id,
                                    method: "GET",
                                    success: function(){
                                        loadItemVesselPortListEdit(vesselId);
                                    }
                                });
                                }, function(){
                            });
                        });
                        
                        $(".btnAddVesselPortEdit").click(function () {
                            loadVesselPortListSelectEdit(vesselId);

                        });
                    }
                });
            }

    function loadVesselPortListSelectEdit(vesselId){
        $.ajax({
            url: context + "licKpdnkkCsaWsVesselPort/ajax/loadVesselPortListSelectEdit" ,
            method: "GET",
            success: function(modalHtml) {
                $("#vesselPortListSelectEditLocation").html(modalHtml);
                loadVesselPortListEdit(vesselId);
                $("#vesselPortListSelectEdit").modal("show");

                $("#btnAddNewVesselPortEdit").click(function(){
                    loadEditVesselPortFormModal(vesselId);
                });
            }
        })
    }

    function loadVesselPortListEdit(vesselId){
        $.ajax({
           url: context + "licKpdnkkCsaWsVesselPort/ajax/loadVesselPortList/"+ csaMain.csaMainId,
           method: "GET",
           success: function(listHtml) {
                $("#vesselPortListEditSelectLocation").html(listHtml);

                $(".btnSelectVesselPort").click(function(){
                    var selected = $(this).attr('selectid');
                    setSelectedVesselPortEdit(selected, vesselId)

                });

                $(".btnDeleteVesselPort").click(function(){
                    var selected = $(this).attr('selectid');
                    $.ajax({
                       url: context + "licKpdnkkCsaWsVesselPort/ajax/deleteById/" + selected,
                            method: "GET",
                            success: function(){
                                loadVesselPortListSelectEdit(vesselId);
                            }
                    });
                });
           }
        });
    }

    function setSelectedVesselPortEdit(vesselPortId, vesselId){
        $("#vesselPortListSelectEdit").modal("hide");

        $.ajax({
            url: context + "licKpdnkkCsaWsVesselPortDetails/ajax/addEdit/" + csaMain.csaMainId + "/" + vesselPortId +"/"+vesselId,
            method: "POST",
//                    data: $("#vesselForm").serialize(),
            success: function(data){
                loadItemVesselPortListEdit(vesselId);
            }
        });

    }

    function loadEditVesselPortFormModal(vesselId){
        $.ajax({
            url: context + "licKpdnkkCsaWsVesselPort/ajax/loadVesselPortFormModal",
            method: "GET",
            success: function(formHtml){
                $("#vesselPortFormModalLocation").html(formHtml);
                customSetup();
                $("#vesselPortFormModal").modal("show");

                $("#btnSaveVesselPorts").click(function(){
                    var vesselPortFormValidation = validateForm([
                        {id: "vesselPortName", message: "'Nama Pelabuhan'"},
                        {id: "stateCode", message: "'Negeri'"}
                    ], "vesselPortForm");

                    if(vesselPortFormValidation == 0) {
                        $.ajax({
                            url: context + "licKpdnkkCsaWsVesselPort/ajax/add/" + csaMain.csaMainId,
                            method: "POST",
                            data: $("#vesselPortForm").serialize(),
                            success: function(){
                                $("#vesselPortFormModal").modal("hide");
                                  loadVesselPortListSelectEdit(vesselId);
                            }
                        });
                    }
                });
            }
        })

    }
    /*end edit*/
            
/*]]>*/
</script>
                                </div>
                            </div>
                        </div>

                        <!--Bahagian E-->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianE">Bahagian E - Butir-Butir Lesen/Kelulusan Daripada Jabatan/Agensi Berkaitan</a></h4> 
                            </div>
                            <div id="bahagianE" class="panel-collapse collapse">
                                <div class="panel-body"> 
                                    <div class="form-group form-group-sm">
    <div class="col-md-12 label-title">Jenis Kelulusan</div>
</div>

<div class="form-group form-group-sm">
    <label id="fireReferenceNoLabel" class="col-md-4 control-label">Kelulusan Jabatan Bomba dan Penyelamat Malaysia</label>
    <label class="col-md-3 control-label">
        <span>No. Rujukan</span>
        <b id="fireReferenceNoRequired" style="color: red; display: none;">*</b>
    </label>
    
    <div class="col-md-4">
        <input type="text" maxlength="50" class="form-control input-sm" id="fireReferenceNo" name="fireReferenceNo" value="" style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-4 control-label">Kebenaran di bawah Akta Kemajuan Petroleum 1974 (PDA)</label>
    <label class="col-md-3 control-label">No. Rujukan</label>
    <div class="col-md-4">
        <input type="text" maxlength="50" class="form-control input-sm" id="pdaReferenceNo" name="pdaReferenceNo" value="" style="padding-left: 10px;">
    </div>
</div>

<!--<div class="form-group">
    <label for="userid" class="col-md-4 control-label" th:text="#{csa.rfc.e_mida}"/>
    <label for="userid" class="col-md-3 control-label" th:text="#{csa.d_no_rujukan}"/>
    <div class="col-md-4">
        <input type="text" maxlength="50" class="form-control input-sm" id="midaReferenceNo" name="midaReferenceNo" th:value="${csaMain.midaReferenceNo}"/>
    </div>
</div>

<div class="form-group">
    <label for="userid" class="col-md-4 control-label" th:text="#{csa.rfc.e_mida_akta}"/>
    <label for="userid" class="col-md-3 control-label" th:text="#{csa.d_no_rujukan}"/>
    <div class="col-md-4">
        <input type="text" maxlength="50" class="form-control input-sm" id="midaPdaReferenceNo" name="midaPdaReferenceNo" th:value="${csaMain.midaPdaReferenceNo}"/>
    </div>
</div>-->

<div class="form-group form-group-sm">
    <label class="col-md-4 control-label">Kelulusan Pihak Berkuasa/Majlis Kerajaan Tempatan</label>
    <label class="col-md-3 control-label required"><span><span>No. Rujukan</span><b id="label_required_" style="color: red"> </b></span><b id="label_required_" style="color: red"> *</b></label>
    <div class="col-md-4">
        <input type="text" maxlength="50" class="form-control input-sm" id="pbtReferenceNo" name="pbtReferenceNo" value="NIL" style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-offset-4 col-md-3 control-label">No. Lesen</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" id="pbtLicenseNo" name="pbtLicenseNo" value="" style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-offset-4 col-md-3 control-label">Tarikh Luput</label>
    <div class="col-md-4">
        <div class="input-group"><input type="text" class="form-control input-sm datepicker-init hasDatepicker" id="pbtExpiryDate" name="pbtExpiryDate" value="" style="padding-left: 10px;"><span class="input-group-addon open-date-picker"><i class="fa fa-calendar"></i></span></div>
    </div>
</div>

<div class="form-group form-group-sm">
    <div class="col-md-12 label-title">Surat/Kelulusan Dari Jabatan/Agensi Lain</div>
</div>


<div class="form-group form-group-sm">
    <button id="btnAddAgency" type="button" class="btn btn-primary">Add</button>
</div>

<div id="agencyListLocation"><table id="csaAgencyList" class="table table-condensed">
    <tbody><tr class="info">
        <th>No</th>
        <th>Jabatan/Agensi</th>
        <th>No. Rujukan Fail</th>
        <th>Action</th>
    </tr>
    <tr>
        <td align="middle" colspan="5">No Record Found</td>
    </tr>
    
</tbody></table></div>

<script>
    /*<![CDATA[*/

    function loadAgency(){
        $.ajax({
            url: context + "licKpdnkkCsaAgency/ajax/loadAgency/" + csaMain. csaMainId,
            method: "GET",
            success: function(listHtml) {
                $("#agencyListLocation").html(listHtml);
                $(".btnDeleteAgency").click(function(){
                    var agencyId = this.id;
                    alertCallbackYN('Are you sure to delete data?', 'Record(s) will be permanently deleted.', '', function(){
                        $.ajax({
                        url: context + "licKpdnkkCsaAgency/ajax/delete/" + agencyId,
                                method: "GET",
                                success: function(){
                                loadAgency();
                                }
                        })
                    }, function(){
                    });
                });
            }
        });
    }

    $("#btnAddAgency").click(function () {
        loadAgencyFormModal();
    })

    function loadAgencyFormModal(){
    $.ajax({
        url: context + "licKpdnkkCsaAgency/ajax/loadAgencyFormModal",
        method: "GET",
        success: function(formHtml){
            $("#agencyFormModalLocation").html(formHtml);
            customSetup();
            $("#agencyFormModal").modal("show");
            $("#btnSaveAgency").click(function(){
                var agencyFormValidation = validateForm([
                    {id: "name", message: "'Jabatan/Agensi'"},
                    {id: "fileNo", message: "'No. Rujukan Fail'"}
                ], "agencyForm");
                if (agencyFormValidation == 0) {
                    $.ajax({
                        url: context + "licKpdnkkCsaAgency/ajax/add/" + csaMain.csaMainId,
                        method: "POST",
                        data: $("#agencyForm").serialize(),
                        success: function(){
                            $("#agencyFormModal").modal("hide");
                            loadAgency();
                        }
                    });
                }
            });
        }
    })
    }
    /*]]>*/
</script>
                                </div>
                            </div>
                        </div>
                        
                        <!--Dokumen-->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianDokumen">Dokumen Sokongan</a>
                                </h4> 
                            </div>
                            <div id="bahagianDokumen" class="panel-collapse collapse">
                                <div class="panel-body"> 
                                    <div class="form-group form-group-sm">
    <h4>Attach Document:</h4>
    <p class="text-muted m-b-30 font-13">
        <span>Maximum number of file that can be uploaded is 20 files for one submission.</span><br>
        <span>Please:</span><br>
        <span>1. Compress the files if more than 20 files need to be uploaded;</span><br>
        <span>2. Combine small files together because the capacity of one file is 5 megabytes</span><br>
        <span>3. Send only required supporting documents</span><br>
    </p>
</div>

<div class="form-group form-group-sm">
    <div><table id="documentChecklistTable" class="table table-condensed table-striped">
        <tbody><tr>
            <td class="documentChecklist_count" width="5%" value="1">1</td>
            <td width="50%">
                <div class="form-group form-group-sm">
                    <span style="text-align: justify; width: 100%" id="KPDN005RFC170001_label_span" class="col-md-8 control-label required"><span><span>Pendaftaran Perniagaan / Syarikat Daripada Suruhanjaya Syarikat Malaysia (SSM) / Perakuan Pendaftaran Koperasi Daripada Suruhanjaya Koperasi Malaysia (SKM) / Dokumen Penubuhan Di Bawah Akta Parlimen Atau Kementerian Masing - Masing</span><b id="label_required_KPDN005RFC170001_label_span" style="color: red"> </b></span><b id="label_required_KPDN005RFC170001_label_span" style="color: red"> *</b></span>
                </div>
            </td>
            <!-- <td width='10%'>
                <div th:if="${document.isDisplaySoftcopyOption}" class="checkbox checkbox-primary">
                    <input th:id="${document.code} + '_softcopy'" th:name="${document.code} + '_softcopy'" 
                           type="checkbox" th:checked="${document.isSoftcopy OR document.isMandatory}"
                           th:attr="mandatory=${document.isMandatory}"/>
                    <label th:for="${document.code} + '_softcopy'"  th:text="#{general.softcopy}"></label>
                </div>
            </td>-->
            <td width="10%">
                <div class="checkbox checkbox-primary">
                    <input type="checkbox" onchange="enableDisableUploadBtn(this);" mandatory="true" id="KPDN005RFC170001_softcopy" name="KPDN005RFC170001_softcopy" checked="checked" style="padding-left: 10px;">
                    <label for="KPDN005RFC170001_softcopy">Softcopy</label>
                </div>
            </td>
            <td width="10%">
                
            </td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" id="btnKPDN005RFC170001_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="KPDN005RFC170001_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoKPDN005RFC170001_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressKPDN005RFC170001_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descKPDN005RFC170001_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divKPDN005RFC170001_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'KPDN005RFC170001_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="documentChecklist_count" width="5%" value="2">2</td>
            <td width="50%">
                <div class="form-group form-group-sm">
                    <span style="text-align: justify; width: 100%" id="KPDN005RFC170002_label_span" class="col-md-8 control-label">Lesen Perniagaan Daripada Pihak Berkuasa Tempatan (PBT)</span>
                </div>
            </td>
            <!-- <td width='10%'>
                <div th:if="${document.isDisplaySoftcopyOption}" class="checkbox checkbox-primary">
                    <input th:id="${document.code} + '_softcopy'" th:name="${document.code} + '_softcopy'" 
                           type="checkbox" th:checked="${document.isSoftcopy OR document.isMandatory}"
                           th:attr="mandatory=${document.isMandatory}"/>
                    <label th:for="${document.code} + '_softcopy'"  th:text="#{general.softcopy}"></label>
                </div>
            </td>-->
            <td width="10%">
                <div class="checkbox checkbox-primary">
                    <input type="checkbox" onchange="enableDisableUploadBtn(this);" mandatory="false" id="KPDN005RFC170002_softcopy" name="KPDN005RFC170002_softcopy" style="padding-left: 10px;">
                    <label for="KPDN005RFC170002_softcopy">Softcopy</label>
                </div>
            </td>
            <td width="10%">
                
            </td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" disabled="" id="btnKPDN005RFC170002_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="KPDN005RFC170002_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoKPDN005RFC170002_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressKPDN005RFC170002_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descKPDN005RFC170002_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divKPDN005RFC170002_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'KPDN005RFC170002_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="documentChecklist_count" width="5%" value="3">3</td>
            <td width="50%">
                <div class="form-group form-group-sm">
                    <span style="text-align: justify; width: 100%" id="KPDN005RFC170003_label_span" class="col-md-8 control-label">Surat Sokongan Daripada Pembekal Yang Terkini</span>
                </div>
            </td>
            <!-- <td width='10%'>
                <div th:if="${document.isDisplaySoftcopyOption}" class="checkbox checkbox-primary">
                    <input th:id="${document.code} + '_softcopy'" th:name="${document.code} + '_softcopy'" 
                           type="checkbox" th:checked="${document.isSoftcopy OR document.isMandatory}"
                           th:attr="mandatory=${document.isMandatory}"/>
                    <label th:for="${document.code} + '_softcopy'"  th:text="#{general.softcopy}"></label>
                </div>
            </td>-->
            <td width="10%">
                <div class="checkbox checkbox-primary">
                    <input type="checkbox" onchange="enableDisableUploadBtn(this);" mandatory="false" id="KPDN005RFC170003_softcopy" name="KPDN005RFC170003_softcopy" style="padding-left: 10px;">
                    <label for="KPDN005RFC170003_softcopy">Softcopy</label>
                </div>
            </td>
            <td width="10%">
                
            </td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" disabled="" id="btnKPDN005RFC170003_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="KPDN005RFC170003_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoKPDN005RFC170003_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressKPDN005RFC170003_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descKPDN005RFC170003_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divKPDN005RFC170003_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'KPDN005RFC170003_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="documentChecklist_count" width="5%" value="4">4</td>
            <td width="50%">
                <div class="form-group form-group-sm">
                    <span style="text-align: justify; width: 100%" id="KPDN005RFC170004_label_span" class="col-md-8 control-label">Kebenaran Di Bawah Akta Kemajuan Pertoleum 1974 (PDA) Daripada Kementerian Perdagangan Dalam Negeri, Koperasi Dan Kepenggunaan (KPDNKK) (Jika berkenaan)</span>
                </div>
            </td>
            <!-- <td width='10%'>
                <div th:if="${document.isDisplaySoftcopyOption}" class="checkbox checkbox-primary">
                    <input th:id="${document.code} + '_softcopy'" th:name="${document.code} + '_softcopy'" 
                           type="checkbox" th:checked="${document.isSoftcopy OR document.isMandatory}"
                           th:attr="mandatory=${document.isMandatory}"/>
                    <label th:for="${document.code} + '_softcopy'"  th:text="#{general.softcopy}"></label>
                </div>
            </td>-->
            <td width="10%">
                <div class="checkbox checkbox-primary">
                    <input type="checkbox" onchange="enableDisableUploadBtn(this);" mandatory="false" id="KPDN005RFC170004_softcopy" name="KPDN005RFC170004_softcopy" style="padding-left: 10px;">
                    <label for="KPDN005RFC170004_softcopy">Softcopy</label>
                </div>
            </td>
            <td width="10%">
                
            </td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" disabled="" id="btnKPDN005RFC170004_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="KPDN005RFC170004_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoKPDN005RFC170004_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressKPDN005RFC170004_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descKPDN005RFC170004_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divKPDN005RFC170004_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'KPDN005RFC170004_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="documentChecklist_count" width="5%" value="5">5</td>
            <td width="50%">
                <div class="form-group form-group-sm">
                    <span style="text-align: justify; width: 100%" id="KPDN005RFC170005_label_span" class="col-md-8 control-label">Surat Sokongan Jabatan Bomba Dan Penyelamat Malaysia (JBPM) Mengenai Kesesuaian Tempat Perniagaan, Stor Simpanannya Dan Kuantiti Yang Dibenarkan Dari Segi Keselamatan/ Jabatan Laut (Jika Berkenaan)</span>
                </div>
            </td>
            <!-- <td width='10%'>
                <div th:if="${document.isDisplaySoftcopyOption}" class="checkbox checkbox-primary">
                    <input th:id="${document.code} + '_softcopy'" th:name="${document.code} + '_softcopy'" 
                           type="checkbox" th:checked="${document.isSoftcopy OR document.isMandatory}"
                           th:attr="mandatory=${document.isMandatory}"/>
                    <label th:for="${document.code} + '_softcopy'"  th:text="#{general.softcopy}"></label>
                </div>
            </td>-->
            <td width="10%">
                <div class="checkbox checkbox-primary">
                    <input type="checkbox" onchange="enableDisableUploadBtn(this);" mandatory="false" id="KPDN005RFC170005_softcopy" name="KPDN005RFC170005_softcopy" style="padding-left: 10px;">
                    <label for="KPDN005RFC170005_softcopy">Softcopy</label>
                </div>
            </td>
            <td width="10%">
                
            </td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" disabled="" id="btnKPDN005RFC170005_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="KPDN005RFC170005_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoKPDN005RFC170005_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressKPDN005RFC170005_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descKPDN005RFC170005_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divKPDN005RFC170005_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'KPDN005RFC170005_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="documentChecklist_count" width="5%" value="6">6</td>
            <td width="50%">
                <div class="form-group form-group-sm">
                    <span style="text-align: justify; width: 100%" id="KPDN005RFC170006_label_span" class="col-md-8 control-label">Salinan Lesen CSA Sedia Ada</span>
                </div>
            </td>
            <!-- <td width='10%'>
                <div th:if="${document.isDisplaySoftcopyOption}" class="checkbox checkbox-primary">
                    <input th:id="${document.code} + '_softcopy'" th:name="${document.code} + '_softcopy'" 
                           type="checkbox" th:checked="${document.isSoftcopy OR document.isMandatory}"
                           th:attr="mandatory=${document.isMandatory}"/>
                    <label th:for="${document.code} + '_softcopy'"  th:text="#{general.softcopy}"></label>
                </div>
            </td>-->
            <td width="10%">
                <div class="checkbox checkbox-primary">
                    <input type="checkbox" onchange="enableDisableUploadBtn(this);" mandatory="false" id="KPDN005RFC170006_softcopy" name="KPDN005RFC170006_softcopy" style="padding-left: 10px;">
                    <label for="KPDN005RFC170006_softcopy">Softcopy</label>
                </div>
            </td>
            <td width="10%">
                
            </td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" disabled="" id="btnKPDN005RFC170006_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="KPDN005RFC170006_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoKPDN005RFC170006_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressKPDN005RFC170006_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descKPDN005RFC170006_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divKPDN005RFC170006_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'KPDN005RFC170006_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="documentChecklist_count" width="5%" value="7">7</td>
            <td width="50%">
                <div class="form-group form-group-sm">
                    <span style="text-align: justify; width: 100%" id="KPDN005RFC170007_label_span" class="col-md-8 control-label">Butiran Kapal (Ship Particular) ? Jika Berkenaan</span>
                </div>
            </td>
            <!-- <td width='10%'>
                <div th:if="${document.isDisplaySoftcopyOption}" class="checkbox checkbox-primary">
                    <input th:id="${document.code} + '_softcopy'" th:name="${document.code} + '_softcopy'" 
                           type="checkbox" th:checked="${document.isSoftcopy OR document.isMandatory}"
                           th:attr="mandatory=${document.isMandatory}"/>
                    <label th:for="${document.code} + '_softcopy'"  th:text="#{general.softcopy}"></label>
                </div>
            </td>-->
            <td width="10%">
                <div class="checkbox checkbox-primary">
                    <input type="checkbox" onchange="enableDisableUploadBtn(this);" mandatory="false" id="KPDN005RFC170007_softcopy" name="KPDN005RFC170007_softcopy" style="padding-left: 10px;">
                    <label for="KPDN005RFC170007_softcopy">Softcopy</label>
                </div>
            </td>
            <td width="10%">
                
            </td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" disabled="" id="btnKPDN005RFC170007_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="KPDN005RFC170007_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoKPDN005RFC170007_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressKPDN005RFC170007_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descKPDN005RFC170007_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divKPDN005RFC170007_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'KPDN005RFC170007_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
        <tr>
            <td width="5%" id="documentChecklist_generalCount">8</td>
            <td width="50%">Dokumen lain yang berkaitan</td>
            <td width="10%"></td>
            <td width="10%"></td>
            <td width="20%">
                <div class="form-group form-group-sm">
                    <div id="uploadFile">

            <div class="btn-group">
                <div class="pull-left">
                    <table style="width:100%">
                        <tbody><tr>
                            <td>
                                <button type="button" class="btn btn-sm btn-primary btnUpload" id="btnGENERAL_374414">Upload</button>
                                <input type="file" name="file" style="display: none; padding-left: 10px;" id="GENERAL_374414">
                            </td>
                            <td style="padding-left: 10px">
                                <div class="label" style="color: blue; padding: 10px; display: none;" id="infoGENERAL_374414">
                                    <center>
                                        <i class="fa fa-gear fa-4x fa-spin"></i><br>
                                        Store file in processing..<br> Please wait.. 
                                    </center>
                                </div>
                                <progress value="3" max="100" id="progressGENERAL_374414" style="display: none;"></progress>
                            </td>
                            <td style="padding-left: 10px" id="descGENERAL_374414"></td>
                        </tr>
                    </tbody></table>

                </div>

                <br>
                <div class="" id="divGENERAL_374414"></div>
            </div>

            <script>
                /*<![CDATA[*/
                var prefix= 'KPDN005';
                var referenceId= 'GENERAL_374414';
                var contextPath = '/BLESS2_PROD_TEST';
                var allowContentType = null;
                
                var upload_confirmation = null;
                var upload_confirmationTitle = null;
                var upload_confirmationContent = null;
                
                file_uploader(contextPath, 'private', prefix, referenceId, allowContentType, upload_confirmation);
                /*]]>*/
            </script>
        </div>
                </div>
            </td>
        </tr>
    </tbody></table></div>
</div>

<script>
/*<![CDATA[*/
    $(function(){
        $("#documentChecklist_generalCount").html(getGeneralDocumentChecklistCount());
    });
    
    function getGeneralDocumentChecklistCount(){
        var return_value = 0;
        $(".documentChecklist_count").each(function(){
            var val = parseInt($(this).attr("value"));
            return_value = val;
        });
        return return_value + 1;
    }
/*]]>*/
</script>
                                </div>
                            </div>
                        </div>

                        <!--Declaration-->
                        <div class="panel panel-default">
                            <div class="panel-heading" role="tab" id="headingOne">
                                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licKpdnkkCsaWsMain/RFC/374414#bahagianPerakuan">Perakuan</a></h4> 
                            </div>
                            <div id="bahagianPerakuan" class="panel-collapse collapse">
                                <div class="panel-body"> 
                                    <div class="form-group form-group-sm">
    <div class="col-md-12">
        <div class="checkbox checkbox-primary">
            <input id="isAgree" name="isAgree" type="checkbox" style="padding-left: 10px;">
            <label for="isAgree">Saya mengaku dan mengesahkan segala <b>maklumat dan salinan dokumen-dokumen</b> yang diberikan dalam borang ini adalah <b>sah, betul dan benar</b>. Pihak KPDNKK <b>BERHAK</b> untuk <b>MENOLAK PERMOHONAN</b> atau sekiranya lesen telah diluluskan, pihak KPDNKK juga berhak  <b>MEMBATALKAN LESEN </b> tersebut sekiranya didapati  <b>maklumat atau salinan dokumen-dokumen yang diberikan untuk permohonan ini adalah palsu. </b></label>
        </div>
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-3 control-label">Nama Pemohon</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="HENG CHEE CHENG" style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-3 control-label">No. KP</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="541122075265" style="padding-left: 10px;">
    </div>
</div>

<div class="form-group form-group-sm">
    <label class="col-md-3 control-label">Jawatan</label>
    <div class="col-md-4">
        <input type="text" class="form-control input-sm" readonly="" value="CHIEF OPERATING OFFICER" style="padding-left: 10px;">
    </div>
</div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>

            </form>

            <div id="itemFormModalLocation"></div>

            <div id="itemSupplierListModalLocation"></div>
            <div id="itemSupplierFormModalLocation"></div>


            <div id="agencyFormModalLocation"></div>
            <div id="vesselFormModalLocation"></div>
            <div id="vesselFormModalEditLocation"></div>
            <div id="vesselEditFormModalLocation"></div>
            <div id="itemVesselPortListLocation"></div>
            <div id="vesselPortListSelectEditLocation"></div>
            <div id="vesselPortSelectListLocation"></div>
            <div id="vesselPortFormModalLocation"></div>

        </div>
                
                <div id="usrAddressListModalLocation"></div>
                <div id="usrAddressFormModalLocation"></div>
                
            </div>
            <div style="padding: 10px; margin-top: 9px;" class="panel-footer">
                <table width="100%">
                    <tbody><tr>
                        <td>
            <div class="btn-group">
    <button type="button" id="btnBack" onclick="location.href = $(this).attr(&#39;url&#39;)" url="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/licLicenseRequest" class="btn btn-danger"><i class="fa fa-1x fa-fw fa-arrow-left"></i><span>Back</span></button>
</div>
<div class="btn-group">
    <a type="button" target="_blank" id="btnChecklist" href="http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/upload/view/GUIDELINE/KPDN005/1" class="btn btn-primary"><i class="fa fa-1x fa-fw fa-check-square-o"></i><span>Checklist &amp; Guidelines</span></a>
    <a type="button" id="btnPreview_online_form" class="btn btn-primary"><i class="fa fa-eye"></i>  <span>Preview</span></a>
</div>
<div class="btn-group pull-right">
    <button id="btnReset" type="button" class="btn btn-default"><i class="fa fa-1x fa-fw fa-refresh"></i><span>Reset</span></button>
    <button id="btnSave" type="button" class="btn btn-primary"><i class="fa fa-1x fa-fw fa-save"></i><span>Save</span></button>
    <button id="btnSubmit" type="button" class="btn btn-primary"><i class="fa fa-1x fa-fw fa-paper-plane"></i><span>Submit</span></button>
</div>
        </td>
                    </tr>
                </tbody></table>
            </div>
        </div><div id="resultLoading" style="width: 100%; height: 100%; position: fixed; z-index: 10000000; top: 0px; left: 0px; right: 0px; bottom: 0px; margin: auto; display: none;"><div style="width: 250px; height: 75px; text-align: center; position: fixed; top: 0px; left: 0px; right: 0px; bottom: 0px; margin: auto; font-size: 16px; z-index: 10; color: rgb(255, 255, 255);"><div class="cssload-speeding-wheel"></div></div><div class="bg" style="background: rgb(255, 255, 255); opacity: 0.7; width: 100%; height: 100%; position: absolute; top: 0px;"></div></div>

        <!--Variables-->
        <script>
        /*<![CDATA[*/
            var context = '/BLESS2_PROD_TEST/' + "private/";
        /*]]>*/
        </script>
        
        <script>
            /*<![CDATA[*/
            var csaMain = {'DT_RowId':null,'addressId':null,'changeReason':null,'corrAddressId':755482,'createdBy':null,'createdTime':null,'csaMainId':183858,'currentLocale':{'$type':'LANGUAGE','$name':'EN'},'faxNo':'+60126582699','fireReferenceNo':null,'isChangeAddress':false,'isChangeItem':false,'isChangeQuantity':false,'isSameAddress':true,'itemList':'Minyak Masak','licenseRequestId':374414,'messageSource':null,'midaPdaReferenceNo':null,'midaReferenceNo':null,'mobileNo':null,'modifiedBy':null,'modifiedTime':null,'pbtExpiryDate':null,'pbtLicenseNo':null,'pbtReferenceNo':'NIL','pdaActivityId':null,'pdaEndDate':null,'pdaLicenseNo':null,'pdaReferenceNo':null,'phoneNo':'043828288','request':null};
            var prev_csaMain = {'DT_RowId':null,'addressId':null,'changeReason':null,'corrAddressId':755482,'createdBy':null,'createdTime':null,'csaMainId':33370,'currentLocale':{'$type':'LANGUAGE','$name':'EN'},'faxNo':'+60126582699','fireReferenceNo':null,'isChangeAddress':false,'isChangeItem':false,'isChangeQuantity':false,'isSameAddress':true,'itemList':'Minyak Masak','licenseRequestId':33917,'messageSource':null,'midaPdaReferenceNo':null,'midaReferenceNo':null,'mobileNo':null,'modifiedBy':null,'modifiedTime':null,'pbtExpiryDate':null,'pbtLicenseNo':null,'pbtReferenceNo':'NIL','pdaActivityId':null,'pdaEndDate':null,'pdaLicenseNo':null,'pdaReferenceNo':null,'phoneNo':'043828288','request':null};
            var licenseRequest = {'DT_RowId':null,'actionName':null,'agencyComment':null,'agencyName':null,'agencyRefNo':null,'agencyReferenceNo':null,'agencyStateId':null,'amountPayment':0.0,'applicantDueDate':null,'applicantTypeId':1,'asNewExpiredDate':null,'asNewLicenseNo':null,'brandId':null,'brandOthers':null,'checkPointName':'checkpoint_name','checklistAction':null,'checkpointAction':null,'checkpointDueDate':null,'checkpointId':null,'claimDate':null,'claimerUserName':null,'collectionAddress':null,'collectionChecklistType':null,'completeDate':null,'contactNo':null,'contactPerson':null,'createDate':'2018-09-21T00:00:00.000+08:00','createUserProfileId':139766,'createdBy':null,'createdTime':null,'currentLicenseMainId':26194,'currentLocale':{'$type':'LANGUAGE','$name':'EN'},'designation':null,'draftNo':'DN22018015188','dueDate':null,'formStatus':null,'formStatusId':1,'isAgree':0,'isDelete':0,'isEmail':false,'isHerebyForm':false,'licenseAgencyId':5701,'licenseCode':null,'licenseFormId':15,'licenseId':4,'licenseMainId':null,'licenseMetaId':14,'licenseName':null,'licenseRef':null,'licenseRequestId':374414,'licenseRequestNo':'DN22018015188','licenseStatusDesc':null,'licenseType':null,'licenseTypeDesc':'license_type_desc','messageSource':null,'modifiedBy':null,'modifiedTime':null,'onlineFormAction':null,'orgOrganisationName':null,'orgReferenceId':12949,'organisationBranchId':null,'organisationId':null,'organisationName':'','paymentMethodId':null,'prevLicenseNo':null,'previewAction':null,'previousUser':null,'printedDate':null,'reasonReprintId':null,'receiptNo':null,'receivedDate':null,'refLicenseMetaId':null,'remarks':null,'request':null,'rtaApplicantName':null,'sectorId':null,'serialNo':null,'submissionCheckpointId':null,'submissionDate':null,'submissionStatusDesc':null,'submissionStatusId':null,'totalPayment':0.0};
            var prev_licenseRequest = {'DT_RowId':null,'actionName':null,'agencyComment':null,'agencyName':null,'agencyRefNo':'13/01-226/AB','agencyReferenceNo':'13/01-226/AB','agencyStateId':null,'amountPayment':0.0,'applicantDueDate':null,'applicantTypeId':1,'asNewExpiredDate':null,'asNewLicenseNo':null,'brandId':null,'brandOthers':null,'checkPointName':'checkpoint_name','checklistAction':null,'checkpointAction':null,'checkpointDueDate':null,'checkpointId':null,'claimDate':null,'claimerUserName':null,'collectionAddress':'KEMENTERIAN PERDAGANGAN DALAM NEGERI, KOPERASI DAN KEPENGGUNAAN PULAU PINANG\nTINGKAT 2, BANGUNAN TUANKU SYED PUTRA\n10300 LEBUH DOWNING\nPULAU PINANG.','collectionChecklistType':null,'completeDate':null,'contactNo':'04-2552518/2518','contactPerson':'FATHIAH/KAY','createDate':null,'createUserProfileId':139766,'createdBy':null,'createdTime':null,'currentLicenseMainId':25936,'currentLocale':{'$type':'LANGUAGE','$name':'EN'},'designation':null,'draftNo':'DN2015074033','dueDate':null,'formStatus':null,'formStatusId':2,'isAgree':1,'isDelete':0,'isEmail':false,'isHerebyForm':false,'licenseAgencyId':4865,'licenseCode':null,'licenseFormId':15,'licenseId':4,'licenseMainId':null,'licenseMetaId':14,'licenseName':null,'licenseRef':null,'licenseRequestId':33917,'licenseRequestNo':'BL2015039987','licenseStatusDesc':null,'licenseType':null,'licenseTypeDesc':'license_type_desc','messageSource':null,'modifiedBy':null,'modifiedTime':null,'onlineFormAction':null,'orgOrganisationName':null,'orgReferenceId':12949,'organisationBranchId':null,'organisationId':null,'organisationName':'SOON SOON OILMILLS SDN. BHD.','paymentMethodId':null,'prevLicenseNo':null,'previewAction':null,'previousUser':null,'printedDate':null,'reasonReprintId':null,'receiptNo':'21203115001118','receivedDate':null,'refLicenseMetaId':null,'remarks':null,'request':null,'rtaApplicantName':null,'sectorId':1,'serialNo':null,'submissionCheckpointId':null,'submissionDate':'2015-11-26T00:00:00.000+08:00','submissionStatusDesc':null,'submissionStatusId':2,'totalPayment':0.0};
            var csa_item = {'DT_RowId':null,'abbreviation':'MT','abbreviationApproved':'MT','abbreviationEdit':'MT','address':null,'createdBy':null,'createdTime':null,'csaItemId':85482,'csaMainId':33370,'currentLocale':{'$type':'LANGUAGE','$name':'EN'},'groupType':'A','isDeleted':false,'itemCode':'CKOIL','itemId':8,'itemName':'Cooking Oil','itemNameMy':'Minyak Masak','messageSource':null,'modifiedBy':null,'modifiedTime':null,'quantity':8000.0,'quantityApproved':8000.0,'quantityApprovedFormatted':'8,000.00','quantityEdit':8000.0,'quantityFormatted':'8,000.00','request':null,'uomApproved':'MT','uomEdit':'MT','uomId':4,'uomIdApproved':4,'uomIdEdit':4,'uomName':'Metric Tonne','uomNameApproved':'Tan Metrik','uomNameEdit':'Metric Tonne','vesselName':null};
            var prefix = 'KPDN005';
            var curLicenseRequest = {'DT_RowId':null,'actionName':null,'agencyComment':null,'agencyName':null,'agencyRefNo':null,'agencyReferenceNo':null,'agencyStateId':null,'amountPayment':0.0,'applicantDueDate':null,'applicantTypeId':1,'asNewExpiredDate':null,'asNewLicenseNo':null,'brandId':null,'brandOthers':null,'checkPointName':'checkpoint_name','checklistAction':null,'checkpointAction':null,'checkpointDueDate':null,'checkpointId':null,'claimDate':null,'claimerUserName':null,'collectionAddress':null,'collectionChecklistType':null,'completeDate':null,'contactNo':null,'contactPerson':null,'createDate':'2018-09-21T00:00:00.000+08:00','createUserProfileId':139766,'createdBy':null,'createdTime':null,'currentLicenseMainId':26194,'currentLocale':{'$type':'LANGUAGE','$name':'EN'},'designation':null,'draftNo':'DN22018015188','dueDate':null,'formStatus':null,'formStatusId':1,'isAgree':0,'isDelete':0,'isEmail':false,'isHerebyForm':false,'licenseAgencyId':5701,'licenseCode':null,'licenseFormId':15,'licenseId':4,'licenseMainId':null,'licenseMetaId':14,'licenseName':null,'licenseRef':null,'licenseRequestId':374414,'licenseRequestNo':'DN22018015188','licenseStatusDesc':null,'licenseType':null,'licenseTypeDesc':'license_type_desc','messageSource':null,'modifiedBy':null,'modifiedTime':null,'onlineFormAction':null,'orgOrganisationName':null,'orgReferenceId':12949,'organisationBranchId':null,'organisationId':null,'organisationName':'','paymentMethodId':null,'prevLicenseNo':null,'previewAction':null,'previousUser':null,'printedDate':null,'reasonReprintId':null,'receiptNo':null,'receivedDate':null,'refLicenseMetaId':null,'remarks':null,'request':null,'rtaApplicantName':null,'sectorId':null,'serialNo':null,'submissionCheckpointId':null,'submissionDate':null,'submissionStatusDesc':null,'submissionStatusId':null,'totalPayment':0.0};
            var customDocumentMandatoryCode = 'KPDN005RNW170001';
            var authorityOrg = 'SSM';
            
            $(function () {
                loadItemList();
                loadItemSupplierList();
                loadVesselPrev();
                loadAgency();
                loadVessel();
                loadPreviousItemList();
                log(licenseRequest.licenseAgencyId);
                log(licenseRequest.licenseRequestId);                
                allActionChange();
                
                loadLicensingAgencyByState(null, prev_licenseRequest.licenseAgencyId, prev_licenseRequest.licenseMetaId, "p_licenseAgencyId");
                loadLicensingAgencyByState(null, licenseRequest.licenseAgencyId, licenseRequest.licenseMetaId, "licenseAgencyId");
                
                if(csaMain.addressId != null){
                    loadNewAddress(csaMain.addressId);
                } 
                
                if(csaMain.corrAddressId != null){
                    loadNewCorrespondenceAddress(csaMain.corrAddressId);
                }
                               
                checkGoodsCheckbox();
                checkItemGroupType();
                checkBunker();
                checkQuantityCheckbox();
                enableDisableUploadBtn();
                checkForCustomDocumentMandatory();
                
            });
            /*]]>*/
        
            /*<![CDATA[*/
            $("#btnSave").click(function(){
                validates();
            });
            
            $("#agencyStateCode").change(function(){
               loadLicensingAgencyByState(this.value, null, licenseRequest.licenseMetaId, "licenseAgencyId");
            });
            
            $('#btnSubmit').click(function () {
                $("#action").val("submit");
                validates();
            });
            
            $("#btnReset").click(function(){
                resetForm("myform");
            });
                   
            /*]]>*/
        
        /*<![CDATA[*/
            $("#isSameAddress").click(function(){
                if($("#isSameAddress").prop('checked')) {
                    copyAddress();
                } else {
                    $("#mailingAddress1").val('');
                    $("#mailingAddress2").val('');
                    $("#mailingAddress3").val('');
                    $("#mailingPostcode").val('');
                    
                    $("#mailingCity").val('');
                    $("#mailingState").val('');
                }
            });
            
            function copyAddress(){
                $("#mailingAddress1").val($("#address1").val());
                $("#mailingAddress2").val($("#address2").val());
                $("#mailingAddress3").val($("#address3").val());
                $("#mailingPostcode").val($("#postcode").val());

                $("#mailingCity").val($("#city").val());
                $("#mailingState").val($("#state").val());
            }
            
            function loadMailingAddress(id) {
                $.ajax({
                    url: context + "usrAddress/ajax/getUsrAddress/" + id,
                    method: "GET",
                    success: function(data) {
                        $("#mailingAddressId", "#myform").val(data.addressId);
                        $("#mailingAddress1", "#myform").val(data.address1);
                        $("#mailingAddress2", "#myform").val(data.address2);
                        $("#mailingAddress3", "#myform").val(data.address3);
                        $("#mailingPostcode", "#myform").val(data.postcode);
                        $("#mailingCity", "#myform").val(data.cityName);
                        $("#mailingState", "#myform").val(data.stateName);
                        
                        $("#isSameAddress").attr('checked', false);
                    }
                });
            }
            
            function checkGoodsCheckbox(){
                var item_ids = [];
                var temp_group_code = "";
                
                $(".previous_goodsCheck:checked").each(function(){
                    var group_code = $(this).attr('groupCode');
                    if(group_code) {
                        temp_group_code = group_code;
                    }
                });
                
                $(".goodsCheck:checked").each(function(){
                    item_ids.push(this.id.replace('id_', ''));
                });
                
                checkDocumentMandatory(true, item_ids);
                
                if(temp_group_code == "") {
                    $(".goodsCheck").prop('disabled', false);
                } else {
                    $(".goodsCheck").each(function(){
                        var group_code = $(this).attr('groupCode');
                        if(group_code == temp_group_code) {
                            $(this).attr('disabled', false);
                        } else {
                            $(this).attr('disabled', true);
                        }
                    });
                }
                               
                if(temp_group_code == "P") {
                    validationType = "P";
                    $("#pdaReferenceNoRequired").show();
                    $("#fireReferenceNoRequired").show();
                    $('#isPdaNo').removeClass('hide');
                    $('#isActivity').removeClass('hide');
                    $('#isEndDate').removeClass('hide');
                    $('#isBunkering').addClass('hide');
                    $('#isStor').removeClass('hide');
                } else if (temp_group_code == "G") {
                    validationType = "G";
                    $("#pdaReferenceNoRequired").hide();
                    $("#fireReferenceNoRequired").show();
                    $('#isPdaNo').addClass('hide');
                    $('#isActivity').addClass('hide');
                    $('#isEndDate').addClass('hide');
                    $('#isBunkering').addClass('hide');
                    $('#isStor').removeClass('hide');
                } else if (temp_group_code == "D"){
                    validationType = "D";
                    $("#pdaReferenceNoRequired").hide();
                    $("#fireReferenceNoRequired").show();
                    $('#isPdaNo').addClass('hide');
                    $('#isActivity').addClass('hide');
                    $('#isEndDate').addClass('hide');
                    $('#isBunkering').addClass('hide');
                    $('#isBunkering').removeClass('hide');
                    $('#isStor').addClass('hide');
                } else {
                    validationType = "default";
                    $("#pdaReferenceNoRequired").hide();
                    $("#fireReferenceNoRequired").hide();
                    $('#isPdaNo').addClass('hide');
                    $('#isActivity').addClass('hide');
                    $('#isEndDate').addClass('hide');
                    $('#isBunkering').addClass('hide');
                    $('#isStor').removeClass('hide');
                }
                
                if(temp_group_code == "D") {
                    $("#fireReferenceNoLabel").html('Kelulusan Jabatan Laut/Lembaga Pelabuhan');
                } else {
                    $("#fireReferenceNoLabel").html('Kelulusan Jabatan Bomba dan Penyelamat Malaysia');
                }
                
                customSetup();
            }
                        
       /*]]>*/
        
            /*<![CDATA[*/
            function validates(){
                checkQuantityCheckbox();
                
                var defaultValidation = [
                    {id: "isAgree", message: "'Perakuan'"}
                ];
                
                var PValidation = [
                    {id: "pdaReferenceNo", message: "'Bahagian E' : 'No. Rujukan' 'Kebenaran di bawah Akta Kemajuan Petroleum 1974 (PDA)'"},
                    {id: "fireReferenceNo", message: "'Bahagian E' : 'No. Rujukan' 'Kelulusan Jabatan Bomba dan Penyelamat Malaysia'"}
                ];
                
                var GValidation = [
                    {id: "fireReferenceNo", message: "'Bahagian E' : 'No. Rujukan' 'Kelulusan Jabatan Bomba dan Penyelamat Malaysia'"}
                ];
                
                var DValidation = [
                    {id: "fireReferenceNo", message: "'Bahagian E' : 'No. Rujukan' 'Kelulusan Jabatan Laut/Lembaga Pelabuhan'"}
                ];
                
                var validation = "";
                if(validationType == "P") {
                    validation = $.merge(defaultValidation, PValidation);
                } else if (validationType == "G") {
                    validation = $.merge(defaultValidation, GValidation);
                } else if (validationType == "D") {
                    validation = $.merge(defaultValidation, DValidation);
                } else {
                    validation = defaultValidation;
                }
                
                var resultCount = validateFormReturnsCountNoAlert(validation, "myform");
                var resultText = validateFormReturnsContent(validation, "myform");
                checkItemDetails(resultCount, resultText);
            }
            
            function checkItemDetails(resultCount, resultText){
                $.ajax({
                    url: context + "licKpdnkkCsaItem/ajax/checkCsaWsQuantityAndStoreAndSupplierInfo/" + csaMain.csaMainId,
                    method: "GET",
                    success: function(check){

                        if(check == 4) {
                            resultText = resultText + '<br>' + ++resultCount + '. ' + 'Bahagian A : Pilih Barang';
                        } else if(check == 5){
                            resultText = resultText + '<br>' + ++resultCount + '. ' + 'Bahagian B : Maklumat Barang Dan Kuantiti(Bunkering)';
                        } else if(check == 7){
                            resultText = resultText + '<br>' + ++resultCount + '. ' + 'Bahagian B : Nama Pelabuhan';
                        }
                        
                        checkDocumentDetails(resultCount, resultText);
                        
                    }
                });
            }
            
            function allActionChange(){
                actionChangeAddress(); 
                actionChangeItem(); 
                actionChangeQuantity(); 
            }
                      
            function actionChangeAddress(){
                var address = $("#isChangeAddress").is(':checked');
                if(address){
                    $("#b_panel").show();
                } else {
                    $("#b_panel").hide();
                }
            }
            
            function actionChangeItem(){
                var item = $("#isChangeItem").is(':checked');
                var quantity = $("#isChangeQuantity").is(':checked');
                
                if(item){
                    $("#c_panel").show();
                    checkDisableChangeQuantity();
                } else if (!item && quantity) {
                    $("#c_panel").hide();
                    checkEnableChangeQuantity();
                } else {
                    $("#c_panel").hide();
                    uncheckChangeQuantity();
                }
            }
            
            function checkEnableChangeQuantity(){
                if(!checkBunker()){
                    var quantity = $("#isChangeQuantity").is(':checked');
                    $("#isChangeQuantity").prop('disabled', false);
                    if(!quantity) {
                        $("#isChangeQuantity").click();
                    }
                }
            }
            
            function checkDisableChangeQuantity(){
                if(!checkBunker()){
                    var quantity = $("#isChangeQuantity").is(':checked');
                    if(!quantity) {
                        $("#isChangeQuantity").click();
                    }
                    $("#isChangeQuantity").prop('disabled', true);
                }
                
            }
            
            function uncheckChangeQuantity(){
                if(!checkBunker()){
                    var quantity = $("#isChangeQuantity").is(':checked');
                    $("#isChangeQuantity").prop('disabled', false);
                    if(quantity) {
                        $("#isChangeQuantity").click();
                    }
                }
            }
            
            function actionChangeQuantity(){
                var quantity = $("#isChangeQuantity").is(':checked');
                if(quantity){
                    if(csa_item.itemCode == "BUNKER"){
                        $("#isBunkering").show();
                        $("#d_panel").hide();
                    } else {
                        $("#isBunkering").hide();
                        $("#d_panel").show();
                    }    
                } 
                else {
                    $("#d_panel").hide();
                }
            }
            
            function checkQuantityCheckbox(){
                var quantity = $("#isChangeQuantity").is(':checked');
                if(quantity) {
                    $("#isChangeQuantityCopy").val('true');
                } else {
                    $("#isChangeQuantityCopy").val('false');
                }
            }
            
            function checkItemGroupType(){
                if(csa_item.groupType == 'A' || csa_item.groupType == 'P'){
                    $("#isChangeItem").prop('disabled', false);
                    $("#isChangeItem").prop('checked', false);
                } else {
                    $("#isChangeItem").prop('disabled', true);
                    $("#isChangeItem").prop('checked', false);
                }
            }
            
            function checkForCustomDocumentMandatory(){
                if(authorityOrg === "SSM"){
                    customDocumentMandatory(customDocumentMandatoryCode);
                }else{
                    removeCustomDocumentMandatory(customDocumentMandatoryCode);
                }
            }
            /*]]>*/
        
            /*<![CDATA[*/
            function loadItemSupplierList(){
                $.ajax({
                   url: context + "licKpdnkkCsaSupplier/ajax/loadItemSupplierList/" + csaMain.csaMainId,
                   method: "GET",
                   success: function(data){
                       $("#itemSupplierListLocation").html(data);
                       
                       $(".btnEditItemSupplier").click(function(){
                           var item_id = this.id;
                           loadItemSupplierListModal(item_id);
                       });
                   }
                });
            }
            
            function loadItemSupplierListModal(csaItemId) {
                $.ajax({
                    url: context + "licKpdnkkCsaSupplier/ajax/loadItemSupplierListModal/" + csaItemId,
                    method: "GET",
                    success: function(data){
                        $("#itemSupplierListModalLocation").html(data);
                        customSetup();
                        loadItemSupplierListDetail(csaItemId);
                        $("#itemSupplierListModal").modal("show");
                        
                        $("#btnSaveItem").click(function(){
                            
                            var item_form_result = validateForm([
                                {id: "quantity", message: "'Jumlah Kuantiti'"},
                                {id: "uom", message: "'Unit of Measurement'"}
                            ], "itemForm");
                            
                            if(item_form_result == 0) {
                                $.ajax({
                                    url: context + "licKpdnkkCsaItem/ajax/updateItem",
                                    method: "POST",
                                    data: $("#itemForm").serialize(),
                                    success: function(){
                                        loadItemList();
                                        $("#itemFormModal").modal("hide");
                                    }
                                });
                            }
                            
                        });
                        
                        $("#btnAddNewItemSupplier").click(function(){
                            active_item_id = csaItemId;
                            loadUsrAddressListModal(5, selectSupplierAddress);
                        });
                    }
                });
            }
            
            function loadItemSupplierListDetail(csaItemId){
                $.ajax({
                    url: context + "licKpdnkkCsaSupplier/ajax/loadItemSupplierListDetail/" + csaItemId,
                    method: "GET",
                    success: function(data){
                        $("#itemSupplierListDetailLocation").html(data);
                        
                        $(".btnDeleteitemSupplier").click(function(){
                            var id = this.id;
                            
                            alertCallbackYN('Are you sure to delete data?', 'Record(s) will be permanently deleted.', '', function(){
                                
                                $.ajax({
                                    url: context + "licKpdnkkCsaSupplier/ajax/delete/" + id,
                                    method: "GET",
                                    success: function(){
                                        loadItemSupplierListDetail(csaItemId);
                                        loadItemSupplierList();
                                    }
                                })
                                
                            }, function(){
                            });
                            
                        });
                    }
                })
            }
            
            function selectSupplierAddress(){
                var addressId = selected_address_id;
                var csaItemId = active_item_id;

                $.ajax({
                    url: context + "licKpdnkkCsaSupplier/ajax/add/" + csaItemId + "/" + addressId,
                    method: "POST",
                    success: function(data){
                        loadItemSupplierListDetail(csaItemId);
                        loadItemSupplierList();
                    }
                });
                
            }
            /*]]>*/
        
            /*<![CDATA[*/
            
            $(".change_checkbox").change(function(){
                allActionChange();
            });
        
              /*]]>*/
        </script>
        
        <script>
            /*<![CDATA[*/
            $(function () {
                $(".panel-heading").clone(true).appendTo("#divToolbar2");
                $(".dropthisup:eq(1)").addClass("dropup");
            });
            /*]]>*/
        </script>
        
        <!--Controls-->
        <script>
        /*<![CDATA[*/
            $("#btnPreview_online_form").click(function(){
                $.ajax({
                    url: window.location.pathname,
                    method: "POST",
                    data: $("#myform").serialize(),
                    success: function(){
                        window.open('http://trainingb2.bless.gov.my/BLESS2_PROD_TEST/private/pdf/form/374414', '_blank');
                    }
                });
            });
        /*]]>*/
        </script>
        
        <!--Address-->
        <script>
            /*<![CDATA[*/
            var usrAddressAjaxUrl = contextPath + "/private/usrAddress/ajax/"
            var selected_address_id = "";
            
            function loadUsrAddressListModal(addressTypeId, functionAfterSelect){
                $.ajax({
                    url: usrAddressAjaxUrl + "loadUsrAddressListModal",
                    method: "GET",
                    success: function(modalHtml) {
                        $("#usrAddressListModalLocation").html(modalHtml);
                        loadUsrAddressList(addressTypeId, functionAfterSelect);
                        $("#usrAddressListModal").modal("show");
                        
                        $("#btnAddNewUsrAddress").click(function(){
                            loadUsrAddressFormModal(addressTypeId, functionAfterSelect);
                        });
                    }
                })
            }
            
            function loadUsrAddressList(addressTypeId, functionAfterSelect){
                $.ajax({
                   url: usrAddressAjaxUrl + "loadUsrAddressList/" + addressTypeId,
                   method: "GET",
                   success: function(listHtml) {
                        $("#usrAddressListLocation").html(listHtml);

                        $(".btnSelectUsrAddress").click(function(){
                            var selected = $(this).attr('selectid');
                            setSelectedUsrAddress(selected, functionAfterSelect);
                        });
                        
                        $(".btnDeleteUsrAddress").click(function(){
                            var selected = $(this).attr('selectid');
                            $.ajax({
                               url: usrAddressAjaxUrl + "deleteUsrAddress/" + selected,
                               method: "GET",
                               success: function(){
                                   loadUsrAddressList(addressTypeId, functionAfterSelect);
                               }
                            });
                        });
                   }
                });
            }
            
            function setSelectedUsrAddress(addressId, functionAfterSelect){
                selected_address_id = addressId;
                $("#usrAddressListModal").modal("hide");
                functionAfterSelect();
            }
            
            function loadUsrAddressFormModal(addressTypeId, functionAfterSelect){
                $.ajax({
                   url: usrAddressAjaxUrl + "loadUsrAddressFormModal/" + addressTypeId,
                   method: "GET",
                   success: function(formModalHtml){
                        $("#usrAddressFormModalLocation").html(formModalHtml);
                        customSetup();
                        $("#usrAddressFormModal").modal("show");
                       
                        $("#stateCode", "#usrAddressForm").change(function(){
                            loadCityByState("stateCode", "cityId", function(){}, "usrAddressForm");
                        });
                       
                        $("#btnResetUsrAddressForm").click(function(){
                           resetForm("usrAddressForm");
                        });
                       
                        $("#btnSaveUsrAddress").click(function(){
                            var countryCode = $('#countryCode').val();
                            var usrAddressFormValidation = 0;
                            if(countryCode === 'MY'){
                                console.log("SELECTED COUNTRY IS MALAYSIA !!!");
                                usrAddressFormValidation = validateForm([
                                    {id:"address1", message:"'Alamat Baris 1'"},
                                    {id:"postcode", message:"'Poskod'"},
                                    {id:"stateCode", message:"'Negeri'"},
                                    {id:"cityId", message:"'Bandar'"},
                                    {id:"countryCode", message:"'Negara'"}
                                ], "usrAddressForm");
                                
                            }else{
                                console.log("SELECTED COUNTRY IS NOT MALAYSIA !!!");
                                usrAddressFormValidation = validateForm([
                                    {id:"address1", message:"'Alamat Baris 1'"},
                                    {id:"countryCode", message:"'Negara'"},
                                    {id:"postcodeOther", message:"'Poskod'"}
                                ], "usrAddressForm");
                            }
                            
                            if(usrAddressFormValidation == 0) {
                                $.ajax({
                                    url: usrAddressAjaxUrl + "add",
                                    method: "POST",
                                    data: $("#usrAddressForm").serialize(),
                                    success: function(result) {
                                        if(result == 1) {
                                            loadUsrAddressList(addressTypeId, functionAfterSelect);
                                            $("#usrAddressFormModal").modal("hide");
                                        } else {
                                            errorAlert();
                                        }
                                    }
                                })
                            }
                       });
                   }
                });
            }
            
            function getAddressData(id, function_callback){
                $.ajax({
                    url: context + "usrAddress/ajax/getUsrAddress/" + id,
                    method: "GET",
                    success: function(data) {
                        var address = formatAddressVertical(data.address1, data.address2, data.address3, data.postcode, data.cityName, data.stateName, '');
                        data.fullAddress = address;
                        function_callback(data);
                    }
                });
            }
            
            function loadAddressToTextarea(textareaId, addressId){
                if(addressId != null) {
                    getAddressData(addressId, function(data){
                        $("#" + textareaId).val(data.fullAddress);
                    });
                } else {
                    $("#" + textareaId).val('No data found');
                }
            }
            
            function loadAddressToTextarea2(textareaId, addressId){
                if(addressId != null) {
                    getAddressData(addressId, function(data){
                        $("#" + textareaId).val(data.fullAddress);
                    });
                } 
//                else {
//                    $("#" + textareaId).val('No data found');
//                }
            }
            /*]]>*/
        </script>
        
        <!--Online Form Validation & Documents Checking-->
        <script>
            /*<![CDATA[*/
            var licenseRequest = {'DT_RowId':null,'actionName':null,'agencyComment':null,'agencyName':null,'agencyRefNo':null,'agencyReferenceNo':null,'agencyStateId':null,'amountPayment':0.0,'applicantDueDate':null,'applicantTypeId':1,'asNewExpiredDate':null,'asNewLicenseNo':null,'brandId':null,'brandOthers':null,'checkPointName':'checkpoint_name','checklistAction':null,'checkpointAction':null,'checkpointDueDate':null,'checkpointId':null,'claimDate':null,'claimerUserName':null,'collectionAddress':null,'collectionChecklistType':null,'completeDate':null,'contactNo':null,'contactPerson':null,'createDate':'2018-09-21T00:00:00.000+08:00','createUserProfileId':139766,'createdBy':null,'createdTime':null,'currentLicenseMainId':26194,'currentLocale':{'$type':'LANGUAGE','$name':'EN'},'designation':null,'draftNo':'DN22018015188','dueDate':null,'formStatus':null,'formStatusId':1,'isAgree':0,'isDelete':0,'isEmail':false,'isHerebyForm':false,'licenseAgencyId':5701,'licenseCode':null,'licenseFormId':15,'licenseId':4,'licenseMainId':null,'licenseMetaId':14,'licenseName':null,'licenseRef':null,'licenseRequestId':374414,'licenseRequestNo':'DN22018015188','licenseStatusDesc':null,'licenseType':null,'licenseTypeDesc':'license_type_desc','messageSource':null,'modifiedBy':null,'modifiedTime':null,'onlineFormAction':null,'orgOrganisationName':null,'orgReferenceId':12949,'organisationBranchId':null,'organisationId':null,'organisationName':'','paymentMethodId':null,'prevLicenseNo':null,'previewAction':null,'previousUser':null,'printedDate':null,'reasonReprintId':null,'receiptNo':null,'receivedDate':null,'refLicenseMetaId':null,'remarks':null,'request':null,'rtaApplicantName':null,'sectorId':null,'serialNo':null,'submissionCheckpointId':null,'submissionDate':null,'submissionStatusDesc':null,'submissionStatusId':null,'totalPayment':0.0};
            var licenseRequestId = 374414;
            var prefix = 'KPDN005';
            
            function enableDisableUploadBtn() {
                $("[id*=_softcopy]").each(function(){
                    var thiz_id = this.id;
                    var btn_id = _replace(thiz_id, '_softcopy', '');
                    btn_id = 'btn' + btn_id + '_' + licenseRequestId;
                    if(this.checked) {
                        $('#' + btn_id).prop('disabled', false);
                    } else {
                        $('#' + btn_id).prop('disabled', true);
                    }
                });
            }
            
            function checkDocumentDetails(resultCount, resultText, warningText){
                console.log("INSIDE checkDocumentDetails");
                console.log("resultText == "+resultText);
                console.log("WarningText == "+warningText)
                $("[id*=_softcopy][mandatory=true]").each(function(){
                    if(!this.checked) {
                        var warning = 'Bahagian E : Please tick document(s)\'s softcopy that are mandatory';
                        resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                        return false;
                    }
                });
                
                var documentConfigCodes = [];
                $("[id*=_softcopy]:checked").each(function(){
                    var documentConfigCode = _replace(this.id, '_softcopy', '');
                    documentConfigCodes.push(documentConfigCode);
                });
                
                if(documentConfigCodes.length > 0) {
                    $.ajax({
                        url: contextPath + "/private/licLicenseDocument/checkDocumentDetails/" + prefix + '/' + licenseRequestId,
                        method: "POST",
                        data: "documentConfigCodes=" + documentConfigCodes.toString(),
                        success: function(result) {
                            if(result == 'FAIL') {
                                var warning = warningText;
                                if(warningText == null) {
                                    warning = 'Bahagian E : Document(s) softcopy upload is not complete';
                                }
                                resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                            }
                            proceed($('#action').val(), resultText);
                        }
                    })
                } else {
                    proceed($('#action').val(), resultText);
                }
                
            }
            
            function checkDocumentDetails1(resultCount, resultText, warningText){
                
                $("[id*=_softcopy][mandatory=true]").each(function(){
                    if(!this.checked) {
                        var warning = 'Bahagian E : Please tick document(s)\'s softcopy that are mandatory';
                        resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                        return false;
                    }
                });
                
                var documentConfigCodes = [];
                $("[id*=_softcopy]:checked").each(function(){
                    var documentConfigCode = _replace(this.id, '_softcopy', '');
                    documentConfigCodes.push(documentConfigCode);
                });
                
                if(documentConfigCodes.length > 0) {
                    $.ajax({
                        url: contextPath + "/private/licLicenseDocument/checkDocumentDetails/" + prefix + '/' + licenseRequestId,
                        method: "POST",
                        data: "documentConfigCodes=" + documentConfigCodes.toString(),
                        success: function(result) {
                            if(result == 'FAIL') {
                                var warning = warningText;
                                if(warningText == null) {
                                    warning = 'Bahagian G : Document(s) softcopy upload is not complete';
                                }
                                resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                            }
                            proceed($('#action').val(), resultText);
                        }
                    })
                } else {
                    proceed($('#action').val(), resultText);
                }
                
            }
            
            function checkDocumentDetails2(resultCount, resultText, warningText){
                
                $("[id*=_softcopy][mandatory=true]").each(function(){
                    if(!this.checked) {
                        var warning = 'Bahagian E : Please tick document(s)\'s softcopy that are mandatory';
                        resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                        return false;
                    }
                });
                
                var documentConfigCodes = [];
                $("[id*=_softcopy]:checked").each(function(){
                    var documentConfigCode = _replace(this.id, '_softcopy', '');
                    documentConfigCodes.push(documentConfigCode);
                });
                
                if(documentConfigCodes.length > 0) {
                    $.ajax({
                        url: contextPath + "/private/licLicenseDocument/checkDocumentDetails/" + prefix + '/' + licenseRequestId,
                        method: "POST",
                        data: "documentConfigCodes=" + documentConfigCodes.toString(),
                        success: function(result) {
                            if(result == 'FAIL') {
                                var warning = warningText;
                                if(warningText == null) {
                                    warning = 'Bahagian F : Document(s) softcopy upload is not complete';
                                }
                                resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                            }
                            proceed($('#action').val(), resultText);
                        }
                    })
                } else {
                    proceed($('#action').val(), resultText);
                }
                
            }
            
            function checkDocumentDetails3(resultCount, resultText, warningText){
                $("[id*=_softcopy][mandatory=true]").each(function(){
                    if(!this.checked) {
                        var warning = 'Bahagian F : Please tick document(s)\'s softcopy that are mandatory';
                        resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                        return false;
                    }
                });
                
                var documentConfigCodes = [];
                $("[id*=_softcopy]:checked").each(function(){
                    var documentConfigCode = _replace(this.id, '_softcopy', '');
                    documentConfigCodes.push(documentConfigCode);
                });
                
                if(documentConfigCodes.length > 0) {
                    $.ajax({
                        url: contextPath + "/private/licLicenseDocument/checkDocumentDetails/" + prefix + '/' + licenseRequestId,
                        method: "POST",
                        data: "documentConfigCodes=" + documentConfigCodes.toString(),
                        success: function(result) {
                            if(result == 'FAIL') {
                                var warning = warningText;
                                if(warningText == null) {
                                    warning = 'Bahagian E : Document(s) softcopy upload is not complete';
                                }
                                resultText = resultText + '<br>' + ++resultCount + '. ' + warning;
                            }
                            proceed($('#action').val(), resultText);
                        }
                    })
                } else {
                    proceed($('#action').val(), resultText);
                }
            }
            
            function proceed(action, resultText){
                if(resultText != '') {
                    if(action == 'submit') {
                        alertCallbackY('Please complete all required field(s)', '<div align="left"><b>Field(s) required:</b>' + resultText + '</div>', 'OK', function(){
                            $('#action').val('');
                        });
                    } else {
                        alertCallbackYN('Form is incomplete.<br>Proceed to save?', '<div align="left"><b>Field(s) required:</b>' + resultText + '</div>', '', function(){
                            $("#action").val("saveIncomplete");
                            $("#myform").submit();
                        }, function(){
                            $('action').val('');
                        });
                    }
                } else {
                    if(action == 'submit') {
                        var submit_confirm_title = 'Are you sure to submit this form?';
                        var submit_confirm_content = 'Changes can\'t be made after submission';
                        alertCallbackYN(submit_confirm_title, submit_confirm_content, '', function(){
                            $("#myform").submit();
                        }, function(){
                            $('#action').val('');
                        });
                    } else {
                        $("#action").val("saveComplete");
                        $("#myform").submit();
                    }
                }
            }
            
            function checkDocumentMandatory(condition, item_ids){
                if(condition) {
                    removeCustomDocumentMandatory();
                    
                    $.ajax({
                        url: context + "refItemDocument/ajax/findDocumentConfigToOverwrite/" + licenseRequest.licenseMetaId,
                        method: "GET",
                        data: "ids=" + item_ids,
                        success: function(data){
                            $.each(data, function(a, b){
                                customDocumentMandatory(b.code);
                            });
                        }
                    });
                } else {
                    removeCustomDocumentMandatory();
                }
                
            }
            
            function removeCustomDocumentMandatory(code){
                if(code) {
                    $("." + code + "_dcm").remove();
                    $("." + code + "_cm").attr('mandatory', 'false');
                } else {
                    $(".document_checklist_mandatory").remove();
                    $(".custom_mandatory").attr('mandatory', 'false');
                }
            }
            
            function customDocumentMandatory(code){
                var count = 0;
                $("." + code + "_dcm").each(function(){
                    count++;
                });
                
                if(count === 0) {
                    $("#" + code + "_label_span").append("<b class='document_checklist_mandatory " + code + "_dcm' style='color: red'> *</b>");
                    $("#" + code + "_softcopy").addClass('custom_mandatory ' + code + '_cm');
                    $("#" + code + "_softcopy").attr('mandatory', 'true');
                }
            }
            /*]]>*/
        </script>
        
        <!--Documents-->
        <script>
        /*<![CDATA[*/
        
            function loadDocumentData(prefix, licenseRequest, activityCodes, itemCodes){
                
                if(activityCodes == null) {
                    activityCodes = "";
                }
                
                if(itemCodes == null) {
                    itemCodes = "";
                }
                
                $.ajax({
                   url: context + "licLicenseDocument/loadDocument/" + prefix + "/" + licenseRequest.licenseRequestId,
                   method: "GET",
                   data: "activityCodes=" + activityCodes + "&itemCodes=" + itemCodes,
                   success: function(data){
                       $("#documentLocation").html(data);
                       customSetup();
                   }
                });
                
            }
        
        /*]]>*/
        </script>
    

<div id="divSmallBoxes"></div><div id="divMiniIcons"></div><div id="divbigBoxes"></div><div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div><span role="status" aria-live="polite" class="select2-hidden-accessible"></span><span role="status" aria-live="polite" class="select2-hidden-accessible"></span></body><div></div></html>